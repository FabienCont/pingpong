{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./sources/game/assets/datasets/index.js","webpack:///./sources/game/assets/images/common/ball.png","webpack:///./sources/game/assets/images/common/player.png","webpack:///./sources/game/assets/images/index.js","webpack:///./sources/game/assets/index.js","webpack:///./sources/game/assets/sounds/index.js","webpack:///./sources/game/components/common/camera.js","webpack:///./sources/game/components/common/forces.js","webpack:///./sources/game/components/common/hitbox.js","webpack:///./sources/game/components/common/images.js","webpack:///./sources/game/components/common/position.js","webpack:///./sources/game/components/common/zone.js","webpack:///./sources/game/components/specific/border.js","webpack:///./sources/game/components/specific/input.js","webpack:///./sources/game/components/specific/ping.js","webpack:///./sources/game/components/specific/selected.js","webpack:///./sources/game/components/specific/sphere.js","webpack:///./sources/game/components/specific/text.js","webpack:///./sources/game/entities/ball.js","webpack:///./sources/game/entities/button.js","webpack:///./sources/game/entities/player.js","webpack:///./sources/game/entities/title.js","webpack:///./sources/game/scenes/demo/server/destroy.js","webpack:///./sources/game/scenes/demo/server/index.js","webpack:///./sources/game/scenes/demo/server/setup.js","webpack:///./sources/game/scenes/demo/server/update.js","webpack:///./sources/game/scenes/demo/start.js","webpack:///./sources/game/scenes/ending/server/destroy.js","webpack:///./sources/game/scenes/ending/server/index.js","webpack:///./sources/game/scenes/ending/server/setup.js","webpack:///./sources/game/scenes/ending/server/update.js","webpack:///./sources/game/scenes/ending/start.js","webpack:///./sources/game/scenes/loading/destroy.js","webpack:///./sources/game/scenes/loading/server/index.js","webpack:///./sources/game/scenes/loading/server/update.js","webpack:///./sources/game/scenes/loading/setup.js","webpack:///./sources/game/scenes/loading/start.js","webpack:///./sources/game/server/scenes/index.js","webpack:///./sources/game/systems/common/forces.js","webpack:///./sources/game/systems/specific/collides.js","webpack:///./sources/game/systems/specific/collidesBall.js","webpack:///./sources/game/systems/specific/collidesPing.js","webpack:///./sources/game/systems/specific/inputsPingServer.js","webpack:///./sources/game/systems/utils/collideDistance.js","webpack:///./sources/server.js","webpack:///./sources/theatre/core/canvas.js","webpack:///./sources/theatre/core/loop.js","webpack:///./sources/theatre/core/server/fakePreload.js","webpack:///./sources/theatre/core/server/polyfill.js","webpack:///./sources/theatre/core/server/theatreServer.js","webpack:///./sources/theatre/modules/camera.js","webpack:///./sources/theatre/modules/collide.js","webpack:///./sources/theatre/modules/ease.js","webpack:///./sources/theatre/modules/shape.js","webpack:///./sources/theatre/modules/world.js","webpack:///external \"express\"","webpack:///external \"http\"","webpack:///external \"module-alias/register\"","webpack:///external \"socket.io\"","webpack:///external \"worker_threads\""],"names":["datasets","images","assets","sounds","Camera","camera","opacity","name","Forces","parts","add","force","easing","elapsed","ending","handling","duration","x","y","moved","push","forEach","Hitbox","width","height","Images","image","destination","frame","framerate","frames","source","Position","z","Zone","zone","Border","radius","color","padding","Input","inputs","Ping","Selected","Sphere","Text","text","Ball","entity","zones","gameLayout","common","ball","Button","Player","number","command","player","length","Title","destroy","console","log","room","io","to","emit","state","winner","module","hot","accept","setup","refSize","player1","player2","startDate","Date","sockets","socket","i","on","update","world","system","entitiesModif","Object","entries","entities","positionComponent","get","forcesComponent","setTimeout","currentUpdate","Math","floor","random","start","command1","command2","gameLayoutFrame","call","title","hintText","winnerText","redirect","preloading","load","context","size","forces","trashes","unlimited","remaining","delta","progress","remove","indexOf","filter","collides","hitboxComponent","rectangle","otherEntityName","otherEntity","otherRectangle","collideDist","xForces","abs","otherEntityForces","yForces","collidesBall","zoneComponent","collidesPing","inputsPingServer","inputsPlayer","input","inputComponent","index","action","collideDistance","collision","deltaX","deltaY","middleCenterDistanceX","middleCenterDistanceY","colDir","active","oX","oY","app","httpServer","createServer","listen","nbRoom","availableRoom","allRooms","createRoom","toString","id","pop","join","reason","userSocket","offsetHeight","offsetWidth","exports","startServer","port","Canvas","type","identifier","element","document","createElement","getContext","ratio","window","devicePixelRatio","resize","setAttribute","style","scale","sharp","imageRendering","imageSmoothingEnabled","Loop","speed","elapsedTime","lastRender","lastUpdate","render","handler","currentRender","now","requestAnimationFrame","bind","max","fakePreload","promises","asset","promise","Promise","resolve","reject","getter","src","sound","all","then","polyfillWebToServer","global","setImmediate","f","TheatreServer","config","container","scenes","expose","loading","restarting","initialize","scene","loop","timeframe","scope","restart","version","theatre","shaking","target","iterator","current","splice","idle","visible","alpha","globalAlpha","drawImage","position","shift","set","shake","amplitude","angle","PI","round","cos","sin","caller","collidePointPoint","collidePointRectangle","collideRectangleRectangle","collide","A","B","parameters","apply","BCDE","ABCD","EFGH","easeIn","power","easeInOut","easeOut","linear","factor","easeInQuad","easeInCubic","easeInQuart","easeInOutQuad","easeInOutCubic","easeInOutQuart","easeOutQuad","easeOutCubic","easeOutQuart","reverse","Circle","Point","Rectangle","Segment","xa","ya","xb","yb","Entity","components","Array","isArray","component","has","search","replace","exclude","hasOwnProperty","World","key","chosen"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./sources/server.js\");\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","const datasets = [];\n\nexport {datasets};\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAAMRJREFUWIXtl7EVwyAMRA8/D0PGSJ3RPItnyihORR4mkoAgAQXX+dm6+xwUxgGA9x4KcsnzVTK0A8Dznc6KyhlXme1Kody3WZhNObx6VmqgJZjyIdvgGtAKz3pSABbhrHfJGTBVCmC5ejJj4170gphuC4YB9Kw/6IoBhmkBLIAFEACqfqOU5GKAYZoKoOc2fLPSBnpA3DKm2oIgyxZ+vLkGLCBIT+leEAZa/xXExZScgZY2srOld8PYaMjl9O8ASa/zeHwAksMXkqW9xfwAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAABgCAYAAAB8InCYAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAAFRJREFUaIHtzjEBADAIxMCnS7VUGv4FFBksFwO56vt+FjubcwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAJBluAwJY4NotAAAAAABJRU5ErkJggg==\"","const images = [{\n        'name': 'player',\n        'scope': 'common',\n         'type': 'image',\n        'source': require('./common/player.png')\n    },{\n        'name': 'ball',\n        'scope': 'common',\n         'type': 'image',\n        'source': require('./common/ball.png')\n    }];\n\nexport {images};\n","import {datasets} from './datasets/index.js';\nimport {images} from './images/index.js';\nimport {sounds} from './sounds/index.js';\n\nconst assets = [\n\n    ...datasets,\n    ...images,\n    ...sounds\n];\n\nexport {assets};\n","const sounds = [];\n\nexport {sounds};\n","function Camera(camera, opacity = 1) {\n\n    this.name = 'camera';\n\n    this.camera = camera;\n    this.opacity = opacity;\n}\n\nexport {Camera};\n","import * as Ease from 'modules/ease.js';\n\nfunction Forces(parts) {\n\n    this.name = 'forces';\n\n    function add(force) {\n\n        const {easing, elapsed, ending, handling, duration, x, y} = force;\n\n        force.x = x;\n        force.y = y;\n        force.duration = duration;\n        force.easing = easing || Ease.linear(1);\n        force.elapsed = elapsed || 0;\n        force.ending = ending || false;\n        force.handling = handling || false;\n\n        force.moved = {\n\n            'x': 0,\n            'y': 0\n        };\n\n        this.parts.push(force);\n    }\n\n    this.parts = [];\n\n    this.add = add;\n\n    parts.forEach((force) => {\n\n        this.add(force);\n    });\n}\n\nexport {Forces};\n","function Hitbox(width, height) {\n\n    this.name = 'hitbox';\n\n    this.width = width;\n    this.height = height;\n}\n\nexport {Hitbox};\n","function Images(parts) {\n\n    this.name = 'images';\n\n    this.parts = parts;\n\n    this.parts.forEach((image) => {\n\n        const {destination, frame, framerate, frames, opacity, source} = image;\n\n        image.source = source;\n\n        image.frames = frames || [[0, 0, 32, 32]];\n        image.frame = frame || 0;\n        image.framerate = framerate || 8;\n        image.destination = destination || [0, 0, 0, 32, 32];\n        image.opacity = opacity || 1;\n\n        image.elapsed = 0;\n    });\n}\n\nexport {Images};\n","function Position(x, y, z = 0) {\n\n    this.name = 'position';\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n}\n\nexport {Position};\n","function Zone(zone) {\n    this.name = 'zone';\n\n    this.frame =zone;\n}\n\nexport {Zone};\n","function Border(width, height,radius,color) {\r\n\r\n    this.name = 'border';\r\n    this.radius= radius;\r\n    this.color = color;\r\n    this.padding={width: width,height:height};\r\n}\r\n\r\nexport {Border};\r\n","function Input(inputs) {\r\n\r\n    this.name = 'input';\r\n\r\n    this.inputs = inputs;\r\n}\r\n\r\nexport {Input};\r\n","function Ping() {\r\n    this.name = 'ping';\r\n}\r\n\r\nexport {Ping};\r\n","function Selected() {\r\n    this.name = 'selected';\r\n}\r\n\r\nexport {Selected};\r\n","function Sphere() {\r\n    this.name = 'sphere';\r\n}\r\n\r\nexport {Sphere};\r\n","function Text(text) {\r\n\r\n    this.name = 'text';\r\n    this.text = text;\r\n}\r\n\r\nexport {Text};\r\n","import {Entity} from 'modules/world.js';\r\nimport {Camera} from 'components/common/camera.js';\r\nimport {Position} from 'components/common/position.js';\r\nimport {Images} from 'components/common/images.js';\r\nimport {Hitbox} from 'components/common/hitbox.js';\r\nimport {Zone} from 'components/common/zone.js';\r\nimport {Forces} from 'components/common/forces.js';\r\nimport {Sphere} from 'components/specific/sphere.js';\r\n\r\nfunction Ball(x,y) {\r\nconst entity=new Entity(\r\n  'ball', [\r\n      new Camera(this.camera),\r\n      new Zone(this.zones.gameLayout),\r\n      new Position(x,y,1),\r\n      new Forces([{x:-5,y:0,duration:30}]),\r\n      new Hitbox(32,32),\r\n      new Sphere(),\r\n      new Images([{\r\n          'source':  this.assets.images.common.ball(),\r\n          'frames': [\r\n              [0, 0, 32, 32]\r\n          ],\r\n          'frame': 0,\r\n          'destination': [0, 0, 0, 32, 32]\r\n      }]),\r\n  ]);\r\n  return entity;\r\n}\r\n\r\nexport {Ball};\r\n","import {Entity} from 'modules/world.js';\r\nimport {Camera} from 'components/common/camera.js';\r\nimport {Position} from 'components/common/position.js';\r\nimport {Zone} from 'components/common/zone.js';\r\nimport {Text} from 'components/specific/text.js';\r\nimport {Border} from 'components/specific/border.js';\r\nimport {Selected} from 'components/specific/selected.js';\r\nimport {Input} from 'components/specific/input.js';\r\n\r\n\r\nfunction Button(x,y,width,height,text) {\r\nconst entity=new Entity(\r\n  'button'+text, [\r\n      new Camera(this.camera),\r\n      new Zone(this.zones.gameLayout),\r\n      new Position(x,y,1),\r\n      new Border(width,height),\r\n      new Text(text),\r\n      new Input(['KEY_UP','KEY_DOWN'])\r\n  ]);\r\n  return entity;\r\n}\r\n\r\nexport {Button};\r\n","import {Entity} from 'modules/world.js';\r\nimport {Camera} from 'components/common/camera.js';\r\nimport {Position} from 'components/common/position.js';\r\nimport {Images} from 'components/common/images.js';\r\nimport {Hitbox} from 'components/common/hitbox.js';\r\nimport {Zone} from 'components/common/zone.js';\r\nimport {Input} from 'components/specific/input.js';\r\nimport {Ping} from 'components/specific/ping.js';\r\n\r\nfunction Player(number,command,x,y) {\r\n\r\nconst entity=new Entity(\r\n  'player'+number, [\r\n      new Camera(this.camera),\r\n      new Zone(this.zones.gameLayout),\r\n      new Position(x,y,1),\r\n      new Ping(),\r\n      new Hitbox(32,96),\r\n      new Images([{\r\n          'source':  this.assets.images.common.player(),\r\n          'frames': [\r\n              [0, 0, 32, 96]\r\n          ],\r\n          'frame': 0,\r\n          'destination': [0, 0, 0, 32, 96]\r\n      }]),\r\n  ]);\r\n\r\n  if(command && command.length>0){\r\n      entity.add(new Input(command));\r\n  }\r\n\r\n  return entity;\r\n}\r\n\r\nexport {Player};\r\n","import {Entity} from 'modules/world.js';\r\nimport {Camera} from 'components/common/camera.js';\r\nimport {Position} from 'components/common/position.js';\r\nimport {Zone} from 'components/common/zone.js';\r\nimport {Hitbox} from 'components/common/hitbox.js';\r\nimport {Text} from 'components/specific/text.js';\r\nimport {Border} from 'components/specific/border.js';\r\n\r\nfunction Title(x,y,text) {\r\nconst entity=new Entity(\r\n  'title'+text, [\r\n      new Camera(this.camera),\r\n      new Zone(this.zones.gameLayout),\r\n      new Position(x,y,1),\r\n      new Text(text),\r\n  ]);\r\n  return entity;\r\n}\r\n\r\nexport {Title};\r\n","function destroy() {\r\n\r\n    console.log('destroy demo scene');\r\n    console.log('-------');\r\n\r\n    this.room.io.to(this.room.room).emit('endGameSesion',this.state.winner);\r\n}\r\n\r\nexport {destroy};\r\n","import {destroy} from './destroy.js';\r\nimport {start} from './../start.js';\r\nimport {setup} from './setup.js';\r\nimport {update} from './update.js';\r\n\r\nif (typeof module.hot !== 'undefined') {\r\n\r\n    module.hot.accept([\r\n\r\n        './destroy.js',\r\n        './../start.js',\r\n        './setup.js',\r\n        './update.js'\r\n    ]);\r\n}\r\n\r\nexport {destroy, setup, start, update};\r\n","function setup() {\r\n\r\n    console.log(\"setup demo scene\")\r\n    this.zones={gameLayout:{}};\r\n    this.zones.gameLayout.refSize=1024;\r\n    this.player1={inputs: []};\r\n    this.player2={inputs: []};\r\n    this.startDate=new Date();\r\n    \r\n    this.room.sockets.forEach((socket, i) => {\r\n      socket.on('inputs', (inputs)=>{\r\n          if(i==0){\r\n            this.player1.inputs.push(...inputs);\r\n          }else if(i==1){\r\n            this.player2.inputs.push(...inputs);\r\n          }\r\n      });\r\n    });\r\n\r\n}\r\n\r\nexport {setup};\r\n","import {forces} from 'systems/common/forces.js';\r\nimport {inputsPingServer} from 'systems/specific/inputsPingServer.js';\r\nimport {collides} from 'systems/specific/collides.js';\r\nimport {collidesBall} from 'systems/specific/collidesBall.js';\r\nimport {collidesPing} from 'systems/specific/collidesPing.js';\r\n\r\nfunction update() {\r\n\r\n    this.world.system(['forces','position'], forces);\r\n    this.world.system(['input'], inputsPingServer);\r\n    this.world.system(['hitbox','position'], collides);\r\n    this.world.system(['hitbox','position','sphere'], collidesBall);\r\n    this.world.system(['hitbox','position','ping'], collidesPing);\r\n\r\n    let entitiesModif=[]\r\n    Object.entries(this.world.entities).forEach(([name, entity]) => {\r\n        let positionComponent=entity.get('position');\r\n        let forcesComponent=entity.get('forces');\r\n        entitiesModif.push({'name':name,'components':[positionComponent,forcesComponent]})\r\n    });\r\n\r\n    if(entitiesModif.length!=0){\r\n      setTimeout(()=>{\r\n        this.room.io.to(this.room.room).emit('updateEntities',{'entities':entitiesModif,'currentUpdate':this.currentUpdate});\r\n      },Math.floor(Math.random() * Math.floor(1000)))\r\n    }\r\n    //emit\r\n    this.player1.inputs = [];\r\n    this.player2.inputs = [];\r\n}\r\n\r\nexport {update};\r\n","import {World} from 'modules/world.js';\nimport {Player} from 'entities/player.js';\nimport {Ball} from 'entities/ball.js';\n\nfunction start() {\n\n    console.log('start demo scene');\n    this.world = new World(this);\n    var command1,command2=[];\n    var gameLayoutFrame=this.zones.gameLayout;\n\n    if(this.player==1 ||typeof this.player!=\"number\"){\n      var command1=['KEY_UP','KEY_DOWN'];\n    }\n    if(this.player==2||typeof this.player!=\"number\"){\n      var command2=['KEY_UP','KEY_DOWN'];\n    }\n    var player1=Player.call(this,1,command1,16,gameLayoutFrame.refSize/2-48);\n    var player2=Player.call(this,2,command2,gameLayoutFrame.refSize-48,gameLayoutFrame.refSize/2-48);\n    var ball=Ball.call(this,gameLayoutFrame.refSize/2,gameLayoutFrame.refSize/2-16);\n\n    this.world.add(ball);\n    this.world.add(player1);\n    this.world.add(player2);\n\n}\n\nexport {start};\n","function destroy() {\r\n\r\n    console.log('destroy ending scene');\r\n    console.log('-------');\r\n\r\n}\r\n\r\nexport {destroy};\r\n","import {destroy} from './destroy.js';\r\nimport {start} from './../start.js';\r\nimport {setup} from './setup.js';\r\nimport {update} from './update.js';\r\n\r\nif (typeof module.hot !== 'undefined') {\r\n\r\n    module.hot.accept([\r\n\r\n        './destroy.js',\r\n        './../start.js',\r\n        './setup.js',\r\n        './update.js'\r\n    ]);\r\n}\r\n\r\nexport {destroy, setup, start, update};\r\n","function setup() {\r\n\r\n    console.log(\"setup ending scene\")\r\n\r\n}\r\n\r\nexport {setup};\r\n","function update() {\r\n\r\n\r\n}\r\n\r\nexport {update};\r\n","import {World,Entity} from 'modules/world.js';\nimport {Button} from 'entities/button.js';\nimport {Title} from 'entities/title.js';\n\nfunction start() {\n\n    console.log('start ending scene');\n    this.world = new World(this);\n    var gameLayoutFrame=this.zones.gameLayout;\n    var winner =this.state.winner;\n    var title=Title.call(this,gameLayoutFrame.refSize/2,100,\"Ping Pong\");\n    var hintText=Title.call(this,gameLayoutFrame.refSize/2,gameLayoutFrame.refSize/2-100,\"Press Enter to restart\");\n    var winnerText=Title.call(this,gameLayoutFrame.refSize/2,gameLayoutFrame.refSize/2-200,\"Player \"+winner+\" won\");\n\n\n    this.world.add([title,winnerText,hintText]);\n}\n\nexport {start};\n","function destroy() {\n\n    console.log('destroy loading scene');\n    console.log('-------');\n\n    delete this.state.redirect;\n    \n}\n\nexport {destroy};\n","import {destroy} from './../destroy.js';\nimport {setup} from './../setup.js';\nimport {start} from './../start.js';\nimport {update} from './update.js';\n\nif (typeof module.hot !== 'undefined') {\n\n    module.hot.accept([\n\n        './../destroy.js',\n        './../setup.js',\n        './../start.js',\n        './update.js'\n    ]);\n}\n\nexport {destroy, setup, start, update};\n","function update() {\n  \n    if (this.preloading === false && this.state.redirect === false) {\n\n        setTimeout(() => {\n\n            this.load('demo');\n\n        }, 3000);\n\n        this.state.redirect = true;\n    }\n}\n\nexport {update};\n","import {Camera} from 'modules/camera.js'\n\nfunction setup() {\n\n    console.log('setup loading scene');\n\n    this.camera = new Camera(this.context, this.size.width, this.size.height);\n\n}\n\nexport {setup};\n","function start() {\n\n    console.log('start loading scene');\n\n    this.state.redirect = false;\n}\n\nexport {start};\n","import * as demo from 'scenes/demo/server/index.js';\r\nimport * as loading from 'scenes/loading/server/index.js';\r\nimport * as ending from 'scenes/ending/server/index.js';\r\nexport {\r\n\r\n    demo,\r\n    loading,\r\n    ending\r\n\r\n};\r\n","function forces(entities) {\n\n    Object.entries(entities).forEach(([name, entity]) => {\n\n        const forcesComponent = entity.get('forces');\n        const positionComponent = entity.get('position');\n\n        const trashes = [];\n\n        forcesComponent.parts.forEach((force) => {\n\n            const unlimited = force.ending === false;\n            const remaining = force.duration - force.elapsed;\n            const delta = (unlimited === false && this.delta.update > remaining) ? remaining : this.delta.update;\n\n            const progress = (force.elapsed + delta) / force.duration;\n\n            const moved = {\n\n                'x': force.x * force.easing(progress),\n                'y': force.y * force.easing(progress)\n            };\n\n            positionComponent.x += moved.x - force.moved.x;\n            positionComponent.y += moved.y - force.moved.y;\n            force.moved = moved;\n\n            force.elapsed += this.delta.update;\n\n            if (typeof force.handling === 'function') {\n\n                const remove = () => {\n\n                    trashes.push(force);\n                };\n\n                force.handling(entity, force.moved.x, force.moved.y, force.elapsed, remove);\n            }\n\n            if (force.elapsed >= force.duration\n            && typeof force.ending === 'function'\n            && trashes.indexOf(force) === -1) {\n\n                force.ending(entity, force.moved.x, force.moved.y, force.elapsed);\n                trashes.push(force);\n            }\n        });\n\n        forcesComponent.parts = forcesComponent.parts.filter((force) => {\n\n            return trashes.indexOf(force) === -1;\n        });\n    });\n}\n\nexport {forces};\n","import {Forces} from 'components/common/forces.js';\r\nimport {collideDistance} from 'systems/utils/collideDistance.js';\r\nimport {collide} from 'modules/collide.js';\r\nimport {Rectangle} from 'modules/shape.js';\r\n\r\nfunction collides(entities) {\r\n    Object.entries(entities).forEach(([name, entity]) => {\r\n\r\n    if(name==='ball'){\r\n\r\n      var positionComponent = entity.get('position');\r\n      var hitboxComponent =entity.get('hitbox');\r\n      var forcesComponent =entity.get('forces');\r\n      var rectangle=new Rectangle(positionComponent.x,positionComponent.y,hitboxComponent.width,hitboxComponent.height);\r\n\r\n      Object.entries(entities).forEach(([otherEntityName, otherEntity]) => {\r\n        if(otherEntity.name!=name){\r\n\r\n          var otherRectangle=new Rectangle(otherEntity.get('position').x,otherEntity.get('position').y,otherEntity.get('hitbox').width,otherEntity.get('hitbox').height);\r\n\r\n          if(collide(rectangle,otherRectangle)){\r\n            var collideDist=collideDistance(rectangle,otherRectangle);\r\n\r\n            var xForces=collideDist.x>0?forcesComponent.parts[0].x+5:-forcesComponent.parts[0].x-5;\r\n            if(Math.abs(xForces>30))xForces<0?-30:30\r\n            var otherEntityForces=otherEntity.get('forces');\r\n            var yForces=0;\r\n            //yForces+=collideDist.y+forcesComponent.parts[0].y;\r\n            yForces-=(((otherRectangle.y+(otherRectangle.height/2))-((rectangle.y+(rectangle.height/2))))/10);\r\n            if(otherEntityForces && otherEntityForces.parts.length>0 ){\r\n              yForces+= otherEntityForces.parts[0].y;\r\n            }\r\n\r\n            entity.add([new Forces([{x:xForces,y:yForces,duration:30}])])\r\n          }\r\n        }\r\n      })\r\n\r\n    }\r\n  });\r\n}\r\n\r\nexport {collides};\r\n","import {Forces} from 'components/common/forces.js';\r\n\r\nfunction collidesBall(entities) {\r\n    Object.entries(entities).forEach(([name, entity]) => {\r\n\r\n    var positionComponent = entity.get('position');\r\n    var hitboxComponent =entity.get('hitbox');\r\n    var forcesComponent =entity.get('forces');\r\n    var zoneComponent =entity.get('zone');\r\n/*\r\n    if(positionComponent.x<0){\r\n      this.state.winner=\"P2\";\r\n      this.load('ending');\r\n    }else if(positionComponent.x+hitboxComponent.width>zoneComponent.frame.refSize){\r\n      this.state.winner=\"P1\";\r\n      this.load('ending');\r\n    }\r\n*/\r\n    if(positionComponent.y<0 || positionComponent.y+hitboxComponent.height>zoneComponent.frame.refSize){\r\n      entity.add([new Forces([{x:forcesComponent.parts[0].x,y:-forcesComponent.parts[0].y,duration:forcesComponent.parts[0].duration}])])\r\n    }\r\n  });\r\n}\r\n\r\nexport {collidesBall};\r\n","import {Forces} from 'components/common/forces.js';\r\n\r\nfunction collidesPing(entities) {\r\n    Object.entries(entities).forEach(([name, entity]) => {\r\n\r\n    var positionComponent = entity.get('position');\r\n    var hitboxComponent =entity.get('hitbox');\r\n    var forcesComponent =entity.get('forces');\r\n    var zoneComponent =entity.get('zone');\r\n\r\n    if(positionComponent.y<0){\r\n      positionComponent.y=0;\r\n      entity.remove('forces');\r\n    }else if(positionComponent.y+hitboxComponent.height>zoneComponent.frame.refSize){\r\n      positionComponent.y=zoneComponent.frame.refSize-hitboxComponent.height;\r\n      entity.remove('forces');\r\n    }\r\n  });\r\n}\r\n\r\nexport {collidesPing};\r\n","import {Forces} from 'components/common/forces.js';\r\n\r\nfunction inputsPingServer(entities) {\r\n    Object.entries(entities).forEach(([name, entity]) => {\r\n\r\n      var inputsPlayer=[];\r\n      if(name==\"player1\"){\r\n        inputsPlayer=this.player1.inputs;\r\n      }\r\n      if(name==\"player2\"){\r\n        inputsPlayer=this.player2.inputs;\r\n      }\r\n\r\n      inputsPlayer.forEach((input) => {\r\n\r\n        const inputComponent = entity.get('input');\r\n        var index= inputComponent.inputs.indexOf(input.action);\r\n\r\n        if (index !== -1 && input.state === 'DOWN') {\r\n\r\n          switch (index) {\r\n              case 0:\r\n                entity.add([new Forces([{x:0,y:-10,duration:15}])])\r\n\r\n              break;\r\n              case 1:\r\n                entity.add([new Forces([{x:0,y:10,duration:15}])])\r\n\r\n              break;\r\n          }\r\n        }\r\n        else if (index !== -1\r\n        && input.state === 'UP') {\r\n\r\n          switch (index) {\r\n              case 0:\r\n                entity.remove('forces')\r\n              break;\r\n              case 1:\r\n                entity.remove('forces')\r\n              break;\r\n\r\n          }\r\n        }\r\n\r\n    });\r\n\r\n  });\r\n}\r\n\r\nexport {inputsPingServer};\r\n","function collideDistance(rectangle, otherRectangle) {\r\n\r\n  var collision= {x:0 , y:0} ;\r\n\r\n      var deltaX = ( rectangle.x + ( rectangle.width / 2 ) ) - ( otherRectangle.x + ( otherRectangle.width / 2 ) );\r\n  \t\tvar deltaY = ( rectangle.y + ( rectangle.height / 2 ) ) - ( otherRectangle.y + ( otherRectangle.height / 2 ) );\r\n\r\n  \t\tvar middleCenterDistanceX = ( rectangle.width / 2 ) + ( otherRectangle.width / 2 );\r\n  \t\tvar middleCenterDistanceY = ( rectangle.height / 2 ) + ( otherRectangle.height / 2 );\r\n  \t\tvar colDir = null;\r\n\r\n  \t\tif( Math.abs( deltaX ) < middleCenterDistanceX && Math.abs( deltaY ) < middleCenterDistanceY ) {\r\n\r\n  \t\t\tif( collision.active === false )\r\n  \t\t\t\tcollision.active = true;\r\n\r\n  \t\t\tvar oX = middleCenterDistanceX - Math.abs( deltaX ),\r\n  \t\t\t\toY = middleCenterDistanceY - Math.abs( deltaY );\r\n  \t\t\tif( oX >= oY ) {\r\n  \t\t\t\tif( deltaY > 0 ) {\r\n  \t\t\t\t      collision.y=oY;\r\n  \t\t\t\t} else {\r\n  \t          collision.y=-oY;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t\telse {\r\n  \t\t\t\tif ( deltaX > 0 ) {\r\n  \t          collision.x=oX;\r\n  \t\t\t\t}\r\n  \t\t\t\telse {\r\n  \t          collision.x=-oX;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n    return collision;\r\n};\r\n\r\nexport {collideDistance};\r\n","import 'module-alias/register';\r\nimport express from 'express';\r\nimport {assets} from 'assets/index.js';\r\nimport http from 'http';\r\nimport { Worker } from 'worker_threads'\r\nimport {TheatreServer} from 'core/server/theatreServer.js';\r\nimport {polyfillWebToServer} from 'core/server/polyfill.js';\r\nimport * as scenes from 'server/scenes/index.js';\r\nimport socket from 'socket.io';\r\n\r\npolyfillWebToServer();\r\nconst app=express();\r\nconst httpServer=http.createServer(app);\r\nconst io=socket.listen(httpServer);\r\nlet nbRoom=0;\r\nconst availableRoom=[];\r\nconst allRooms={};\r\n\r\n/*app.get('/', function(req, res){\r\n  res.sendFile(__dirname + '/dist/index.html');\r\n});*/\r\n\r\n\r\nconst createRoom=function(){\r\n  nbRoom++;\r\n  var room=nbRoom.toString();\r\n  availableRoom.push(nbRoom);\r\n  allRooms[nbRoom]={io:io,room:nbRoom,sockets:[]};\r\n  return nbRoom;\r\n}\r\n\r\n\r\nio.sockets.on('connection', function (socket) {\r\n  console.log(\"new connection\",socket.id);\r\n  var room='';\r\n  if(availableRoom.length>0){\r\n    room=availableRoom.pop();\r\n    // console.log(\"joinRoom:\"+room);\r\n  }else{\r\n    room=createRoom();\r\n    // console.log(\"createRoom:\"+room);\r\n  }\r\n\r\n  socket.join(room, () => {\r\n    // let rooms = Object.keys(socket.rooms);\r\n    // console.log(rooms); // [ <socket.id>, 'room 237' ]\r\n    console.log(room); // [ <socket.id>, 'room 237' ]\r\n\r\n    socket.emit(\"playerSelected\",allRooms[room].sockets.length+1);\r\n    allRooms[room].sockets.push(socket);\r\n    io.to(room).emit('new user in room',socket.id); // broadcast to everyone in the room\r\n    io.to(room).emit('gameReady'); // broadcast to everyone in the room\r\n\r\n    socket.on('disconnect', (reason) => {\r\n      allRooms[room].sockets.filter(userSocket=>{\r\n        return userSocket.id!=socket.id\r\n      });\r\n      if(allRooms[room].sockets.length==0){\r\n        delete allRooms[room];\r\n      }\r\n    });\r\n\r\n\r\n    if(allRooms[room].sockets.length==2){\r\n      new TheatreServer({\r\n          'assets': assets,\r\n          'container': {offsetHeight:0,offsetWidth:0},\r\n          'expose': false,\r\n          'scenes': scenes,\r\n          'sharp': false,\r\n          'room':allRooms[room]\r\n      });\r\n\r\n       io.to(room).emit(\"startGameSession\");\r\n    }\r\n  });\r\n});\r\n\r\nexports.start = function startServer(port){\r\n  httpServer.listen(port, function(){\r\n    console.log('listening on *:'+port);\r\n  });\r\n}\r\n","function Canvas(type, identifier, width, height) {\n\n    const element = document.createElement('canvas');\n    const context = element.getContext(type);\n    const ratio = window.devicePixelRatio || 1;\n\n    function resize(width, height) {\n\n        element.setAttribute('height', ratio * height);\n        element.setAttribute('width', ratio * width);\n\n        element.style.height = height + 'px';\n        element.style.width = width + 'px';\n\n        context.scale(ratio, ratio);\n    }\n\n    function sharp() {\n\n        element.style.imageRendering = '-moz-crisp-edges';\n        element.style.imageRendering = '-webkit-crisp-edges';\n        element.style.imageRendering = 'crisp-edges';\n        element.style.imageRendering = 'pixelated';\n        context.imageSmoothingEnabled = false;\n    }\n\n    element.setAttribute('id', identifier);\n\n    resize(width, height);\n\n    this.context = context;\n    this.element = element;\n    this.resize = resize;\n    this.sharp = sharp;\n}\n\n// exports current module as an object\nexport {Canvas};\n","function Loop(framerate = 60, speed = 1) {\n\n    let elapsedTime = 0;\n    let lastRender = null;\n    let lastUpdate = null;\n\n    function render(handler) {\n\n        const currentRender = Date.now();\n\n        if (lastRender !== null) {\n\n            handler(currentRender - lastRender);\n        }\n\n        // call user's render handler on each available frame\n        requestAnimationFrame(this.render.bind(this, handler));\n\n        lastRender = currentRender;\n    }\n\n    function update(handler) {\n\n        const currentUpdate = Date.now();\n        this.currentUpdate=currentUpdate;\n        if (lastUpdate !== null) {\n\n            // define elapsed time since last update\n            elapsedTime += currentUpdate - lastUpdate;\n        }\n\n        // call user's update handler matching timeframe, speed and fixing browser time handling\n        while (elapsedTime >= 1000 / this.framerate / this.speed) {\n\n            // define elapsed time since last user's update handler matching timeframe and speed\n            elapsedTime -= 1000 / this.framerate / this.speed;\n\n            handler(1000 / this.framerate);\n        }\n\n        lastUpdate = currentUpdate;\n\n        // call update loop at least 60 times per second to quickly catch framerate or speed changes\n        setTimeout(this.update.bind(this, handler), 1000 / Math.max(this.framerate, 60));\n    }\n\n    this.framerate = framerate;\n    this.speed = speed;\n\n    this.render = render;\n    this.update = update;\n    this.currentUpdate=0;\n}\n\n// exports current module as an object\nexport {Loop};\n","function fakePreload(assets, handler) {\r\n\r\n    let promises = [];\r\n\r\n    // preloads each asset\r\n    assets.forEach(function (asset) {\r\n\r\n        // creates a promise for current asset preloading\r\n        const promise = new Promise(function (resolve, reject) {\r\n\r\n            // if current asset is a dataset then preload it\r\n            if (asset.type === 'dataset') {\r\n\r\n                asset.getter = () => asset.source;\r\n\r\n                resolve(asset);\r\n            }\r\n\r\n            // if current asset is an image then preload it\r\n            if (asset.type === 'image') {\r\n\r\n                const image = {};\r\n\r\n                image.src = asset.source;\r\n\r\n                // when current image is loaded then resolve current promise\r\n\r\n                asset.getter = () => image;\r\n\r\n                resolve(asset);\r\n            }\r\n\r\n            // if current asset is a sound then preload it\r\n            else if (asset.type === 'sound') {\r\n\r\n                const sound = {};\r\n\r\n                asset.getter = () => sound;\r\n\r\n                resolve(asset);\r\n            }\r\n        });\r\n\r\n        promises.push(promise);\r\n    });\r\n\r\n    // call user's success handler when all assets are preloaded\r\n    Promise.all(promises).then(handler);\r\n}\r\n\r\n// exports current module as a function\r\nexport {fakePreload};\r\n","function polyfillWebToServer(){\r\n  if (typeof window === 'undefined') {\r\n      global.window = {};\r\n      global.window.requestAnimationFrame=function(){\r\n          setImmediate(()=>f(Date.now()))\r\n      }\r\n  }\r\n}\r\n\r\nexport {polyfillWebToServer}\r\n","import {Canvas} from 'core/canvas.js';\r\nimport {Loop} from 'core/loop.js';\r\nimport {fakePreload} from 'core/server/fakePreload.js';\r\n\r\nfunction TheatreServer(config) {\r\n\r\n    const {assets, container, scenes,room} = config;\r\n\r\n    const expose = config.expose || false;\r\n    const framerate = config.framerate || 60;\r\n    const sharp = config.sharp || false;\r\n    const speed = config.speed || 1;\r\n\r\n    const size = {\r\n        'height' : container.offsetHeight,\r\n        'width' : container.offsetWidth\r\n    };\r\n\r\n    let loading = null;\r\n    let restarting = false;\r\n\r\n    function initialize() {\r\n\r\n        this.assets = {};\r\n        this.delta = {};\r\n        this.delta.render = 0;\r\n        this.delta.update = 0;\r\n\r\n        this.scene = this.scenes.loading;\r\n        this.scene.setup.call(this);\r\n        this.scene.start.call(this);\r\n\r\n        const loop = new Loop(framerate, speed);\r\n\r\n        loop.update((timeframe) => {\r\n\r\n            this.delta.update = timeframe;\r\n            this.scene.update.call(this);\r\n\r\n            if (restarting === true) {\r\n\r\n                this.scene.start.call(this);\r\n\r\n                restarting = false;\r\n\r\n                return;\r\n            }\r\n\r\n            if (loading !== null) {\r\n\r\n                this.scene.destroy.call(this);\r\n                this.scene = this.scenes[loading];\r\n                this.scene.setup.call(this);\r\n                this.scene.start.call(this);\r\n\r\n                loading = null;\r\n\r\n                return;\r\n            }\r\n        });\r\n\r\n        fakePreload(assets, (assets) => {\r\n\r\n            assets.forEach((asset) => {\r\n\r\n                if (typeof this.assets[asset.type + 's'] === 'undefined') {\r\n\r\n                    this.assets[asset.type + 's'] = {};\r\n                }\r\n\r\n                if (typeof this.assets[asset.type + 's'][asset.scope] === 'undefined') {\r\n\r\n                    this.assets[asset.type + 's'][asset.scope] = {};\r\n                }\r\n\r\n                this.assets[asset.type + 's'][asset.scope][asset.name] = asset.getter;\r\n            });\r\n\r\n            this.preloading = false;\r\n        });\r\n\r\n        this.loop = loop;\r\n        this.preloading = true;\r\n    }\r\n\r\n    function load(scene) {\r\n\r\n        loading = scene;\r\n    }\r\n\r\n    function restart() {\r\n\r\n        restarting = true;\r\n    }\r\n\r\n    this.preloading = false;\r\n    this.scenes = scenes;\r\n    this.size = size;\r\n    this.room=room;\r\n    this.state = {};\r\n    this.version = '0.33.0';\r\n\r\n    this.load = load;\r\n    this.restart = restart;\r\n\r\n    initialize.call(this, config);\r\n\r\n    if (expose === true) {\r\n\r\n        window.theatre = this;\r\n    }\r\n}\r\n\r\n// exports current module as an object\r\nexport {TheatreServer};\r\n","import * as Ease from './ease.js';\n\nfunction Camera(context, width, height) {\n\n    let images = [];\n\n    let shaking = {\n\n        'current': false,\n        'duration': 0,\n        'easing': null,\n        'elapsed': 0,\n        'force': {\n\n            'x': 0,\n            'y': 0\n        },\n        'shift': {\n\n            'x': 0,\n            'y': 0\n        }\n    };\n\n    function add(image) {\n\n        let target = 0;\n\n        for (let iterator = images.length - 1; iterator >= 0; iterator -= 1) {\n\n            const current = images[iterator];\n\n            if (image.destination.z >= current.destination.z) {\n\n                target = iterator + 1;\n\n                break;\n            }\n        }\n\n        images.splice(target, 0, image);\n    }\n\n    function idle() {\n\n        shaking = {\n\n            'current': false,\n            'duration': 0,\n            'easing': null,\n            'elapsed': 0,\n            'force': {\n\n                'x': 0,\n                'y': 0\n            },\n            'shift': {\n\n                'x': 0,\n                'y': 0\n            }\n        };\n    }\n\n    function render() {\n\n        images.forEach((image) => {\n\n            const {destination, frame, opacity, source} = image;\n\n            if (opacity > 0\n            && this.visible(destination.x, destination.y, destination.width, destination.height) === true) {\n\n                const alpha = context.globalAlpha;\n\n                context.globalAlpha = opacity;\n\n                context.drawImage(\n\n                    source,\n                    frame.x, frame.y, frame.width, frame.height,\n                    destination.x - (this.position.x + shaking.shift.x), destination.y - (this.position.y + shaking.shift.y), destination.width, destination.height\n                );\n\n                context.globalAlpha = alpha;\n            }\n        });\n\n        images = [];\n    }\n\n    function set(x, y) {\n\n        this.position.x = x;\n        this.position.y = y;\n    }\n\n    function shake(x, y, duration, easing = Ease.reverse(Ease.easeOut(2))) {\n\n        this.idle();\n\n        shaking.force = {\n\n            'x': x,\n            'y': y\n        };\n\n        shaking.current = true;\n        shaking.duration = duration;\n        shaking.easing = easing;\n    }\n\n    function update(delta) {\n\n        if (shaking.current === false) {\n\n            return;\n        }\n\n        if (shaking.elapsed + delta >= shaking.duration) {\n\n            this.idle();\n\n            return;\n        }\n\n        shaking.elapsed += delta;\n\n        const amplitude = shaking.easing(shaking.elapsed / shaking.duration);\n        const angle = Math.random() * 2 * Math.PI;\n\n        shaking.shift.x = Math.round(Math.cos(angle) * shaking.force.x * amplitude);\n        shaking.shift.y = Math.round(Math.sin(angle) * shaking.force.y * amplitude);\n    }\n\n    function visible(x, y, width, height) {\n\n        const camera = {\n\n            'x': this.position.x + shaking.shift.x,\n            'y': this.position.y + shaking.shift.y,\n            'width': this.size.width,\n            'height': this.size.height\n        };\n\n        if (x + width <= camera.x\n        || x >= camera.x + camera.width\n        || y + height <= camera.y\n        || y >= camera.y + camera.height) {\n\n            return false;\n        }\n\n        return true;\n    }\n\n    this.position = {\n\n        'x': 0,\n        'y': 0\n    };\n\n    this.size = {\n\n        'width': width,\n        'height': height\n    };\n\n    this.add = add;\n    this.idle = idle;\n    this.render = render;\n    this.set = set;\n    this.shake = shake;\n    this.update = update;\n    this.visible = visible;\n}\n\n// exports current module as an object\nexport {Camera};\n","import {Point, Rectangle} from './shape.js';\n\nconst caller = {\n\n    'collidePointPoint': collidePointPoint,\n    'collidePointRectangle': collidePointRectangle,\n    'collideRectangleRectangle': collideRectangleRectangle\n};\n\nfunction collide(A, B) {\n\n    const parameters = [];\n\n    let name = 'collide';\n\n    if (A instanceof Point === true) {\n\n        parameters.push(A);\n\n        name += 'Point';\n    }\n\n    if (B instanceof Point === true) {\n\n        parameters.push(B);\n\n        name += 'Point';\n    }\n\n    if (parameters.indexOf(A) === -1\n    && A instanceof Rectangle === true) {\n\n        parameters.push(A);\n\n        name += 'Rectangle';\n    }\n\n    if (parameters.indexOf(B) === -1\n    && B instanceof Rectangle === true) {\n\n        parameters.push(B);\n\n        name += 'Rectangle';\n    }\n\n    return caller[name].apply(null, parameters);\n}\n\nfunction collidePointPoint(A, B) {\n\n    if (A.x !== B.x\n    || A.y !== B.y) {\n\n        return false;\n    }\n\n    return true;\n}\n\nfunction collidePointRectangle(A, BCDE) {\n\n    if (A.x < BCDE.x\n    || A.x > BCDE.x + BCDE.width\n    || A.y < BCDE.y\n    || A.y > BCDE.y + BCDE.height) {\n\n        return false;\n    }\n\n    return true;\n}\n\nfunction collideRectangleRectangle(ABCD, EFGH) {\n\n    if (ABCD.x + ABCD.width < EFGH.x\n    || ABCD.x > EFGH.x + EFGH.width\n    || ABCD.y + ABCD.height < EFGH.y\n    || ABCD.y > EFGH.y + EFGH.height) {\n\n        return false;\n    }\n\n    return true;\n}\n\n// exports current module as a function\nexport {collide};\n","function easeIn(power) {\n\n    // accelerating from zero velocity\n    return (x) => x ** power;\n}\n\nfunction easeInOut(power) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return (x) => {\n\n        if (x < 0.5) {\n\n            return easeIn(power)(2 * x) / 2\n        }\n\n        return 1 - easeInOut(power)(1 - x)\n    }\n}\n\nfunction easeOut(power) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return (x) => 1 - easeIn(power)(1 - x);\n}\n\nfunction linear(factor) {\n\n    // linear progression\n    return (x) => x * factor;\n}\n\nfunction easeInQuad(x) {\n\n    // accelerating from zero velocity\n    return easeIn(2)(x);\n}\n\nfunction easeInCubic(x) {\n\n    // accelerating from zero velocity\n    return easeIn(3)(x);\n}\n\nfunction easeInQuart(x) {\n\n    // accelerating from zero velocity\n    return easeIn(4)(x);\n}\n\nfunction easeInOutQuad(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(2)(x);\n}\n\nfunction easeInOutCubic(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(3)(x);\n}\n\nfunction easeInOutQuart(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(4)(x);\n}\n\nfunction easeOutQuad(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(2)(x);\n}\n\nfunction easeOutCubic(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(3)(x);\n}\n\nfunction easeOutQuart(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(4)(x);\n}\n\nfunction reverse(handler) {\n\n    // reversing easing function\n    return (x) => handler(1 - x);\n}\n\n// exports current module as functions\nexport {\n\n    // export ease function creators\n    easeIn, easeInOut, easeOut, linear,\n\n    // export ease-in functions\n    easeInCubic, easeInQuad, easeInQuart,\n\n    // export ease-in-out functions\n    easeInOutCubic, easeInOutQuad, easeInOutQuart,\n\n    // export ease-out functions\n    easeOutCubic, easeOutQuad, easeOutQuart,\n\n    // export utility functions\n    reverse\n};\n","function Circle(x, y, radius) {\n\n    this.radius = radius;\n    this.x = x;\n    this.y = y;\n}\n\nfunction Point(x, y) {\n\n    this.x = x;\n    this.y = y;\n}\n\nfunction Rectangle(x, y, width, height) {\n\n    this.height = height;\n    this.width = width;\n    this.x = x;\n    this.y = y;\n}\n\nfunction Segment(xa, ya, xb, yb) {\n\n    this.xa = xa;\n    this.xb = xb;\n    this.ya = ya;\n    this.yb = yb;\n}\n\n// exports current module as objects\nexport {Circle, Point, Rectangle, Segment};\n","function Entity(name, components) {\n\n    function add(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        components.forEach((component) => {\n\n            this.components[component.name] = component;\n        });\n    }\n\n    function get(component) {\n\n        return this.components[component];\n    }\n\n    function has(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        for (let iterator = 0, length = components.length; iterator < length; iterator += 1) {\n\n            const search = components[iterator];\n            const component = search.replace('not:', '');\n            const exclude = search !== component;\n\n            if (this.components.hasOwnProperty(component) === exclude) {\n\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function remove(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        for (let iterator = 0, length = components.length; iterator < length; iterator += 1) {\n\n            const component = components[iterator];\n\n            if (this.components.hasOwnProperty(component) === true) {\n\n                delete this.components[component];\n            }\n        }\n    }\n\n    this.components = {};\n    this.name = name;\n\n    this.add = add;\n    this.get = get;\n    this.has = has;\n    this.remove = remove;\n\n    this.add(components);\n}\n\nfunction World(context) {\n\n    function add(entities) {\n\n        if (Array.isArray(entities) === false) {\n\n            entities = [entities];\n        }\n\n        entities.forEach((entity) => {\n\n            this.entities[entity.name] = entity;\n        });\n    }\n\n    function get(entity) {\n\n        return this.entities[entity];\n    }\n\n    function remove(entities) {\n\n        if (Array.isArray(entities) === false) {\n\n            entities = [entities];\n        }\n\n        for (let iterator = 0, length = entities.length; iterator < length; iterator += 1) {\n\n            const entity = entities[iterator];\n            const key = entity.name || entity;\n\n            if (this.entities.hasOwnProperty(key) === true) {\n\n                delete this.entities[key];\n            }\n        }\n    }\n\n    function system(components, handler, entities = this.entities) {\n\n        const chosen = {};\n\n        Object.entries(entities).forEach(([name, entity]) => {\n\n            if (entity.has(components) === true) {\n\n                chosen[name] = entity;\n            }\n        });\n\n        handler.call(context, chosen);\n    }\n\n    this.entities = {};\n\n    this.add = add;\n    this.get = get;\n    this.remove = remove;\n    this.system = system;\n}\n\nexport {\n\n    // exports current module as an object\n    World,\n\n    // exports helpers for current module\n    Entity\n};\n","module.exports = require(\"express\");","module.exports = require(\"http\");","module.exports = require(\"module-alias/register\");","module.exports = require(\"socket.io\");","module.exports = require(\"worker_threads\");"],"sourceRoot":""}