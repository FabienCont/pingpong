{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./sources/game/components/common/forces.js","webpack:///./sources/theatre/modules/ease.js","webpack:///./sources/game/scenes/demo/resize.js","webpack:///./sources/game/scenes/loading/index.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./sources/game/scenes/loading/destroy.js","webpack:///./sources/game/scenes/loading/render.js","webpack:///./sources/game/scenes/loading/resize.js","webpack:///./sources/game/scenes/loading/setup.js","webpack:///./sources/game/scenes/loading/start.js","webpack:///./sources/game/scenes/loading/update.js","webpack:///./sources/game/scenes/demo/index.js","webpack:///./sources/game/scenes/demo/destroy.js","webpack:///./sources/theatre/modules/world.js","webpack:///./sources/game/components/common/camera.js","webpack:///./sources/game/components/common/position.js","webpack:///./sources/game/components/common/images.js","webpack:///./sources/game/components/common/hitbox.js","webpack:///./sources/game/components/common/zone.js","webpack:///./sources/game/entities/player.js","webpack:///./sources/game/components/specific/ping.js","webpack:///./sources/game/components/specific/input.js","webpack:///./sources/game/scenes/demo/start.js","webpack:///./sources/game/entities/ball.js","webpack:///./sources/game/components/specific/sphere.js","webpack:///./sources/game/systems/common/forces.js","webpack:///./sources/game/systems/specific/inputs.js","webpack:///./sources/theatre/modules/shape.js","webpack:///./sources/theatre/modules/collide.js","webpack:///./sources/game/systems/specific/collides.js","webpack:///./sources/game/systems/utils/collideDistance.js","webpack:///./sources/game/systems/specific/collidesBall.js","webpack:///./sources/game/systems/specific/collidesPing.js","webpack:///./sources/game/scenes/demo/update.js","webpack:///./sources/theatre/modules/keynames.js","webpack:///./sources/theatre/modules/keycodes.js","webpack:///./sources/game/scenes/demo/setup.js","webpack:///./sources/theatre/modules/camera.js","webpack:///./sources/theatre/modules/keyboard.js","webpack:///./sources/game/systems/common/images.js","webpack:///./sources/game/scenes/demo/render.js","webpack:///./sources/game/assets/images/common/player.png","webpack:///./sources/game/assets/images/common/ball.png","webpack:///./sources/game/assets/datasets/index.js","webpack:///./sources/game/assets/images/index.js","webpack:///./sources/game/assets/index.js","webpack:///./sources/index.js","webpack:///./sources/theatre/core/theatre.js","webpack:///./sources/theatre/core/canvas.js","webpack:///./sources/theatre/core/loop.js","webpack:///./sources/theatre/core/preload.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","Forces","modules_ease_js__WEBPACK_IMPORTED_MODULE_0__","parts","_this","this","add","force","easing","elapsed","ending","handling","duration","x","y","moved","push","forEach","easeIn","power","Math","pow","easeOut","linear","factor","reverse","handler","resize","console","log","xOffset","yOffset","width","size","height","scale","camera","set","ceil","round","Number","EPSILON","zone","z","_destroy_js__WEBPACK_IMPORTED_MODULE_0__","_render_js__WEBPACK_IMPORTED_MODULE_1__","_resize_js__WEBPACK_IMPORTED_MODULE_2__","_setup_js__WEBPACK_IMPORTED_MODULE_3__","_start_js__WEBPACK_IMPORTED_MODULE_4__","_update_js__WEBPACK_IMPORTED_MODULE_5__","hot","accept","originalModule","webpackPolyfill","children","destroy","state","redirect","render","context","fillStyle","fillRect","font","textAlign","textBaseline","fillText","preloading","setup","start","update","setTimeout","load","Entity","components","Array","isArray","component","has","iterator","length","search","replace","exclude","remove","Camera","opacity","arguments","undefined","Position","Images","image","destination","frame","framerate","frames","source","Hitbox","Zone","Player","number","command","entity","assets","images","common","player","inputs","world","entities","_this2","system","chosen","entries","_ref","_ref2","_slicedToArray","player1","player2","ball","forces","forcesComponent","positionComponent","trashes","unlimited","remaining","delta","progress","indexOf","filter","inputs_slicedToArray","input","index","action","common_forces","Point","Rectangle","caller","collidePointPoint","A","B","collidePointRectangle","BCDE","collideRectangleRectangle","ABCD","EFGH","collides","collides_slicedToArray","hitboxComponent","rectangle","_ref3","_ref4","otherEntity","otherRectangle","parameters","apply","collide","collideDist","collision","deltaX","deltaY","middleCenterDistanceX","middleCenterDistanceY","abs","active","oX","oY","collideDistance","xForces","otherEntityForces","yForces","collidesBall","collidesBall_slicedToArray","zoneComponent","restart","collidesPing","collidesPing_slicedToArray","keynames","UP","DOWN","S","Z","setup_setup","shaking","current","shift","position","target","splice","idle","visible","alpha","globalAlpha","drawImage","shake","ease","amplitude","angle","random","PI","cos","sin","keyboard","codes","names","states","blur","type","keydown","event","code","keyCode","preventDefault","keyup","addEventListener","removeEventListener","images_images","cameraComponent","imagesComponent","scope","assets_assets","concat","_toConsumableArray","config","container","scenes","expose","sharp","speed","offsetHeight","offsetWidth","loading","restarting","version","scene","canvas","identifier","element","document","createElement","getContext","ratio","window","devicePixelRatio","setAttribute","style","imageRendering","imageSmoothingEnabled","appendChild","loop","elapsedTime","lastRender","lastUpdate","currentRender","Date","now","requestAnimationFrame","currentUpdate","max","timeframe","promises","asset","promise","Promise","resolve","reject","Image","src","onload","sound","Audio","oncanplaythrough","cloneNode","all","then","preload","theatre","body","scenes_namespaceObject"],"mappings":"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mCClFAnC,EAAAU,EAAA0B,EAAA,sBAAAC,IAAA,IAAAC,EAAAtC,EAAA,GAEA,SAASqC,EAAOE,GAAO,IAAAC,EAAAC,KAEnBA,KAAK9B,KAAO,SAuBZ8B,KAAKF,SAELE,KAAKC,IAvBL,SAAaC,GAAO,IAETC,EAAqDD,EAArDC,OAAQC,EAA6CF,EAA7CE,QAASC,EAAoCH,EAApCG,OAAQC,EAA4BJ,EAA5BI,SAAUC,EAAkBL,EAAlBK,SAAUC,EAAQN,EAARM,EAAGC,EAAKP,EAALO,EAEvDP,EAAMM,EAAIA,EACVN,EAAMO,EAAIA,EACVP,EAAMK,SAAWA,EACjBL,EAAMC,OAASA,GAAUN,EAAA,EAAY,GACrCK,EAAME,QAAUA,GAAW,EAC3BF,EAAMG,OAASA,IAAU,EACzBH,EAAMI,SAAWA,IAAY,EAE7BJ,EAAMQ,OAEFF,EAAK,EACLC,EAAK,GAGTT,KAAKF,MAAMa,KAAKT,IAOpBJ,EAAMc,QAAQ,SAACV,GAEXH,EAAKE,IAAIC,oCCjCjB,SAASW,EAAOC,GAGZ,OAAO,SAACN,GAAD,OAAAO,KAAAC,IAAOR,EAAKM,IAiBvB,SAASG,EAAQH,GAGb,OAAO,SAACN,GAAD,OAAO,EAAIK,EAAOC,EAAPD,CAAc,EAAIL,IAGxC,SAASU,EAAOC,GAGZ,OAAO,SAACX,GAAD,OAAOA,EAAIW,GAyDtB,SAASC,EAAQC,GAGb,OAAO,SAACb,GAAD,OAAOa,EAAQ,EAAIb,IAzF9BjD,EAAAU,EAAA0B,EAAA,sBAAAsB,IAAA1D,EAAAU,EAAA0B,EAAA,sBAAAuB,IAAA3D,EAAAU,EAAA0B,EAAA,sBAAAyB,kCCAA,SAASE,IAELC,QAAQC,IAAI,qBACZ,IAAIC,EAAQ,EACRC,EAAQ,EAERC,EAAMA,EAAM3B,KAAK4B,KAAKD,MACtBE,EAAO7B,KAAK4B,KAAKC,OACjBC,EAAM,EACV9B,KAAK+B,OAAOC,IAAI,EAAE,GAClBhC,KAAK+B,OAAOH,KAAKD,MAAM3B,KAAK4B,KAAKD,MACjC3B,KAAK+B,OAAOH,KAAKC,OAAO7B,KAAK4B,KAAKC,OAC/B7B,KAAK4B,KAAKD,MAAM3B,KAAK4B,KAAKC,QAC3BF,EAAM3B,KAAK4B,KAAKC,OAChBJ,EAAQV,KAAKkB,MAAMjC,KAAK4B,KAAKD,MAAM3B,KAAK4B,KAAKC,QAAQ,IAC9C7B,KAAK4B,KAAKD,MAAM3B,KAAK4B,KAAKC,SAEjCC,EAAMf,KAAKmB,MAA4D,KAArDlC,KAAK4B,KAAKD,MAAM3B,KAAK4B,KAAKC,OAASM,OAAOC,UAAkB,IAC9ET,EAAM3B,KAAK4B,KAAKC,OAChBA,EAAO7B,KAAK4B,KAAKC,OACjBH,GAAU1B,KAAK4B,KAAKC,OAAO7B,KAAK4B,KAAKD,OAAOG,EAAO,EACnDL,EAAQ,GAEVzB,KAAKqC,KAAK,IAAI7B,EAAIiB,EAAQhB,EAAKiB,EAAQY,EAlB3B,EAkBuCX,MAAMA,EAAME,OAAOA,EAAOC,MAAMA,GAvBvFvE,EAAAU,EAAA0B,EAAA,sBAAA2B,kCCAA/D,EAAAkB,EAAAkB,GAAA,SAAAjC,GAAA,IAAA6E,EAAAhF,EAAA,GAAAA,EAAAU,EAAA0B,EAAA,4BAAA4C,EAAA,QAAAC,EAAAjF,EAAA,GAAAA,EAAAU,EAAA0B,EAAA,2BAAA6C,EAAA,QAAAC,EAAAlF,EAAA,GAAAA,EAAAU,EAAA0B,EAAA,2BAAA8C,EAAA,QAAAC,EAAAnF,EAAA,GAAAA,EAAAU,EAAA0B,EAAA,0BAAA+C,EAAA,QAAAC,EAAApF,EAAA,GAAAA,EAAAU,EAAA0B,EAAA,0BAAAgD,EAAA,QAAAC,EAAArF,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,2BAAAiD,EAAA,SAO0B,IAAflF,EAAOmF,KAEdnF,EAAOmF,IAAIC,QAEP,eACA,cACA,cACA,aACA,aACA,mDChBRpF,EAAOD,QAAU,SAASsF,GACzB,IAAKA,EAAeC,gBAAiB,CACpC,IAAItF,EAASW,OAAOY,OAAO8D,GAEtBrF,EAAOuF,WAAUvF,EAAOuF,aAC7B5E,OAAOC,eAAeZ,EAAQ,UAC7Ba,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOE,KAGhBS,OAAOC,eAAeZ,EAAQ,MAC7Ba,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOC,KAGhBU,OAAOC,eAAeZ,EAAQ,WAC7Ba,YAAY,IAEbb,EAAOsF,gBAAkB,EAE1B,OAAOtF,iCCtBR,SAASwF,IAEL3B,QAAQC,IAAI,yBACZD,QAAQC,IAAI,kBAELxB,KAAKmD,MAAMC,SALtB7F,EAAAU,EAAA0B,EAAA,sBAAAuD,kCCAA,SAASG,IAILrD,KAAKsD,QAAQC,UAAY,UACzBvD,KAAKsD,QAAQE,SAAS,EAAG,EAAGxD,KAAK4B,KAAKD,MAAO3B,KAAK4B,KAAKC,QAEvD7B,KAAKsD,QAAQG,KAAO,mBACpBzD,KAAKsD,QAAQI,UAAY,QACzB1D,KAAKsD,QAAQK,aAAe,MAC5B3D,KAAKsD,QAAQC,UAAY,UACzBvD,KAAKsD,QAAQM,SAAS,YAAa,EAAG,GACtC5D,KAAKsD,QAAQC,UAAY,UAEzBvD,KAAKsD,QAAQM,SAAS,yBAA0B,EAAG,KAE3B,IAApB5D,KAAK6D,aAEL7D,KAAKsD,QAAQM,SAAS,yBAA0B,EAAG,IACnD5D,KAAKsD,QAAQM,SAAS,0BAA2B,EAAG,KAnB5DrG,EAAAU,EAAA0B,EAAA,sBAAA0D,kCCAA,SAAS/B,IAELC,QAAQC,IAAI,wBAFhBjE,EAAAU,EAAA0B,EAAA,sBAAA2B,kCCAA,SAASwC,IAELvC,QAAQC,IAAI,uBAFhBjE,EAAAU,EAAA0B,EAAA,sBAAAmE,kCCAA,SAASC,IAELxC,QAAQC,IAAI,uBAEZxB,KAAKmD,MAAMC,UAAW,EAJ1B7F,EAAAU,EAAA0B,EAAA,sBAAAoE,kCCAA,SAASC,IAAS,IAAAjE,EAAAC,MAIU,IAApBA,KAAK6D,aAAgD,IAAxB7D,KAAKmD,MAAMC,WAExCa,WAAW,WAEPlE,EAAKmE,KAAK,SAEX,KAEHlE,KAAKmD,MAAMC,UAAW,GAZ9B7F,EAAAU,EAAA0B,EAAA,sBAAAqE,kCCAAzG,EAAAkB,EAAAkB,GAAA,SAAAjC,GAAA,IAAA6E,EAAAhF,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,4BAAA4C,EAAA,QAAAC,EAAAjF,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,2BAAA6C,EAAA,QAAAC,EAAAlF,EAAA,GAAAA,EAAAU,EAAA0B,EAAA,2BAAA8C,EAAA,QAAAC,EAAAnF,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,0BAAA+C,EAAA,QAAAC,EAAApF,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,0BAAAgD,EAAA,QAAAC,EAAArF,EAAA,IAAAA,EAAAU,EAAA0B,EAAA,2BAAAiD,EAAA,SAO0B,IAAflF,EAAOmF,KAEdnF,EAAOmF,IAAIC,QAEP,eACA,cACA,cACA,aACA,aACA,kEChBR,SAASI,IAEL3B,QAAQC,IAAI,sBACZD,QAAQC,IAAI,WAHhBjE,EAAAU,EAAA0B,EAAA,sBAAAuD,obCAA,SAASiB,EAAOjG,EAAMkG,GA4DlBpE,KAAKoE,cACLpE,KAAK9B,KAAOA,EAEZ8B,KAAKC,IA7DL,SAAamE,GAAY,IAAArE,EAAAC,MAEa,IAA9BqE,MAAMC,QAAQF,KAEdA,GAAcA,IAGlBA,EAAWxD,QAAQ,SAAC2D,GAEhBxE,EAAKqE,WAAWG,EAAUrG,MAAQqG,KAqD1CvE,KAAKxB,IAjDL,SAAa+F,GAET,OAAOvE,KAAKoE,WAAWG,IAgD3BvE,KAAKwE,IA7CL,SAAaJ,IAEyB,IAA9BC,MAAMC,QAAQF,KAEdA,GAAcA,IAGlB,IAAK,IAAIK,EAAW,EAAGC,EAASN,EAAWM,OAAQD,EAAWC,EAAQD,GAAY,EAAG,CAEjF,IAAME,EAASP,EAAWK,GACpBF,EAAYI,EAAOC,QAAQ,OAAQ,IACnCC,EAAUF,IAAWJ,EAE3B,GAAIvE,KAAKoE,WAAW5E,eAAe+E,KAAeM,EAE9C,OAAO,EAIf,OAAO,GA2BX7E,KAAK8E,OAxBL,SAAgBV,IAEsB,IAA9BC,MAAMC,QAAQF,KAEdA,GAAcA,IAGlB,IAAK,IAAIK,EAAW,EAAGC,EAASN,EAAWM,OAAQD,EAAWC,EAAQD,GAAY,EAAG,CAEjF,IAAMF,EAAYH,EAAWK,IAEqB,IAA9CzE,KAAKoE,WAAW5E,eAAe+E,WAExBvE,KAAKoE,WAAWG,KAanCvE,KAAKC,IAAImE,GCpEb,SAASW,EAAOhD,GAAqB,IAAbiD,EAAaC,UAAAP,OAAA,QAAAQ,IAAAD,UAAA,GAAAA,UAAA,GAAH,EAE9BjF,KAAK9B,KAAO,SAEZ8B,KAAK+B,OAASA,EACd/B,KAAKgF,QAAUA,ECLnB,SAASG,EAAS3E,EAAGC,GAAU,IAAP6B,EAAO2C,UAAAP,OAAA,QAAAQ,IAAAD,UAAA,GAAAA,UAAA,GAAH,EAExBjF,KAAK9B,KAAO,WAEZ8B,KAAKQ,EAAIA,EACTR,KAAKS,EAAIA,EACTT,KAAKsC,EAAIA,ECNb,SAAS8C,EAAOtF,GAEZE,KAAK9B,KAAO,SAEZ8B,KAAKF,MAAQA,EAEbE,KAAKF,MAAMc,QAAQ,SAACyE,GAAU,IAEnBC,EAA0DD,EAA1DC,YAAaC,EAA6CF,EAA7CE,MAAOC,EAAsCH,EAAtCG,UAAWC,EAA2BJ,EAA3BI,OAAQT,EAAmBK,EAAnBL,QAASU,EAAUL,EAAVK,OAEvDL,EAAMK,OAASA,EAEfL,EAAMI,OAASA,KAAY,EAAG,EAAG,GAAI,KACrCJ,EAAME,MAAQA,GAAS,EACvBF,EAAMG,UAAYA,GAAa,EAC/BH,EAAMC,YAAcA,IAAgB,EAAG,EAAG,EAAG,GAAI,IACjDD,EAAML,QAAUA,GAAW,EAE3BK,EAAMjF,QAAU,IClBxB,SAASuF,EAAOhE,EAAOE,GAEnB7B,KAAK9B,KAAO,SAEZ8B,KAAK2B,MAAQA,EACb3B,KAAK6B,OAASA,ECLlB,SAAS+D,EAAKL,GACZ,OACErH,KAAO,OAEPqH,MAAQA,GCKZ,SAASM,EAAOC,EAAOC,EAAQvF,EAAEC,GAEjC,IAAMuF,EAAO,IAAI7B,EACf,SAAS2B,GACL,IAAIf,EAAO/E,KAAK+B,QAChB6D,EAAK5F,KAAKqC,MACV,IAAI8C,EAAS3E,EAAEC,EAAE,GACjB,IChBN,WACIT,KAAK9B,KAAO,QDgBV,IAAIyH,EAAO,GAAG,IACd,IAAIP,IACAM,OAAW1F,KAAKiG,OAAOC,OAAOC,OAAOC,SACrCX,SACK,EAAG,EAAG,GAAI,KAEfF,MAAS,EACTD,aAAgB,EAAG,EAAG,EAAG,GAAI,SAQrC,OAJGS,GAAWA,EAAQrB,OAAO,GACzBsB,EAAO/F,IAAI,IE7BjB,SAAeoG,GAEXrG,KAAK9B,KAAO,QAEZ8B,KAAKqG,OAASA,EFyBD,CAAUN,IAGlBC,aG5BT,SAASjC,IAELxC,QAAQC,IAAI,oBAEZxB,KAAKsG,MAAQ,IT+DjB,SAAehD,GAsDXtD,KAAKuG,YAELvG,KAAKC,IAtDL,SAAasG,GAAU,IAAAC,EAAAxG,MAEa,IAA5BqE,MAAMC,QAAQiC,KAEdA,GAAYA,IAGhBA,EAAS3F,QAAQ,SAACoF,GAEdQ,EAAKD,SAASP,EAAO9H,MAAQ8H,KA8CrChG,KAAKxB,IA1CL,SAAawH,GAET,OAAOhG,KAAKuG,SAASP,IAyCzBhG,KAAK8E,OAtCL,SAAgByB,IAEoB,IAA5BlC,MAAMC,QAAQiC,KAEdA,GAAYA,IAGhB,IAAK,IAAI9B,EAAW,EAAGC,EAAS6B,EAAS7B,OAAQD,EAAWC,EAAQD,GAAY,EAAG,CAE/E,IAAMuB,EAASO,EAAS9B,GAClBvF,EAAM8G,EAAO9H,MAAQ8H,GAEe,IAAtChG,KAAKuG,SAAS/G,eAAeN,WAEtBc,KAAKuG,SAASrH,KAyBjCc,KAAKyG,OApBL,SAAgBrC,EAAY/C,GAAmC,IAA1BkF,EAA0BtB,UAAAP,OAAA,QAAAQ,IAAAD,UAAA,GAAAA,UAAA,GAAfjF,KAAKuG,SAE3CG,KAENrI,OAAOsI,QAAQJ,GAAU3F,QAAQ,SAAAgG,GAAoB,IAAAC,EAAAC,EAAAF,EAAA,GAAlB1I,EAAkB2I,EAAA,GAAZb,EAAYa,EAAA,IAElB,IAA3Bb,EAAOxB,IAAIJ,KAEXsC,EAAOxI,GAAQ8H,KAIvB3E,EAAQvD,KAAKwF,EAASoD,ISlHb,CAAU1G,MACvB,IAEI+G,EAAQlB,EAAO/H,KAAKkC,KAAK,GAFf,SAAS,YAEiB,GAAGA,KAAKqC,KAAK,GAAGR,OAAO,EAAE,IAC7DmF,EAAQnB,EAAO/H,KAAKkC,KAAK,GAFf,QAAQ,SAEkBA,KAAKqC,KAAK,GAAGV,MAAM,GAAG3B,KAAKqC,KAAK,GAAGR,OAAO,EAAE,IAChFoF,ECJR,WAkBE,OAjBW,IAAI9C,EACf,QACI,IAAIY,EAAO/E,KAAK+B,QAChB6D,EAAK5F,KAAKqC,MACV,IAAI8C,EAASnF,KAAK4B,KAAKD,MAAM,EAAE3B,KAAK4B,KAAKC,OAAO,EAAE,GAClD,IAAIqF,EAAA,IAAS1G,GAAG,EAAEC,EAAE,EAAEF,SAAS,MAC/B,IAAIoF,EAAO,GAAG,IACd,ICjBN,WACI3F,KAAK9B,KAAO,UDiBV,IAAIkH,IACAM,OAAW1F,KAAKiG,OAAOC,OAAOC,OAAOc,OACrCxB,SACK,EAAG,EAAG,GAAI,KAEfF,MAAS,EACTD,aAAgB,EAAG,EAAG,EAAG,GAAI,UDXrBxH,KAAKkC,MACnBA,KAAKsG,MAAMrG,IAAIgH,GACfjH,KAAKsG,MAAMrG,IAAI8G,GACf/G,KAAKsG,MAAMrG,IAAI+G,GAhBnBzJ,EAAAU,EAAA0B,EAAA,sBAAAoE,obGAA,SAASmD,EAAOX,GAAU,IAAAxG,EAAAC,KAEtB3B,OAAOsI,QAAQJ,GAAU3F,QAAQ,SAAAgG,GAAoB,IAAAC,EAAAC,EAAAF,EAAA,GAAZZ,GAAYa,EAAA,GAAAA,EAAA,IAE3CM,EAAkBnB,EAAOxH,IAAI,UAC7B4I,EAAoBpB,EAAOxH,IAAI,YAE/B6I,KAENF,EAAgBrH,MAAMc,QAAQ,SAACV,GAE3B,IAAMoH,GAA6B,IAAjBpH,EAAMG,OAClBkH,EAAYrH,EAAMK,SAAWL,EAAME,QACnCoH,GAAuB,IAAdF,GAAuBvH,EAAKyH,MAAMxD,OAASuD,EAAaA,EAAYxH,EAAKyH,MAAMxD,OAExFyD,GAAYvH,EAAME,QAAUoH,GAAStH,EAAMK,SAE3CG,GAEFF,EAAKN,EAAMM,EAAIN,EAAMC,OAAOsH,GAC5BhH,EAAKP,EAAMO,EAAIP,EAAMC,OAAOsH,IAShC,GANAL,EAAkB5G,GAAKE,EAAMF,EAAIN,EAAMQ,MAAMF,EAC7C4G,EAAkB3G,GAAKC,EAAMD,EAAIP,EAAMQ,MAAMD,EAC7CP,EAAMQ,MAAQA,EAEdR,EAAME,SAAWL,EAAKyH,MAAMxD,OAEE,mBAAnB9D,EAAMI,SAAyB,CAOtCJ,EAAMI,SAAS0F,EAAQ9F,EAAMQ,MAAMF,EAAGN,EAAMQ,MAAMD,EAAGP,EAAME,QAL5C,WAEXiH,EAAQ1G,KAAKT,KAMjBA,EAAME,SAAWF,EAAMK,UACA,mBAAjBL,EAAMG,SACe,IAA5BgH,EAAQK,QAAQxH,KAEfA,EAAMG,OAAO2F,EAAQ9F,EAAMQ,MAAMF,EAAGN,EAAMQ,MAAMD,EAAGP,EAAME,SACzDiH,EAAQ1G,KAAKT,MAIrBiH,EAAgBrH,MAAQqH,EAAgBrH,MAAM6H,OAAO,SAACzH,GAElD,OAAmC,IAA5BmH,EAAQK,QAAQxH,oaChDnC,SAASmG,EAAOE,GAAU,IAAAxG,EAAAC,KACtB3B,OAAOsI,QAAQJ,GAAU3F,QAAQ,SAAAgG,GAAoB,IAAAC,EAAAe,EAAAhB,EAAA,GAAZZ,GAAYa,EAAA,GAAAA,EAAA,IAEnD9G,EAAKsG,OAAOzF,QAAQ,SAACiH,GAEnB,IACIC,EADmB9B,EAAOxH,IAAI,SACR6H,OAAOqB,QAAQG,EAAME,QAE/C,IAAe,IAAXD,GAAgC,SAAhBD,EAAM1E,MAExB,OAAQ2E,GACJ,KAAK,EACH9B,EAAO/F,KAAK,IAAI+H,EAAA,IAASxH,EAAE,EAAEC,GAAG,EAAEF,SAAS,QAE7C,MACA,KAAK,EACHyF,EAAO/F,KAAK,IAAI+H,EAAA,IAASxH,EAAE,EAAEC,EAAE,EAAEF,SAAS,aAK7C,IAAe,IAAXuH,GACU,OAAhBD,EAAM1E,MAEP,OAAQ2E,GACJ,KAAK,EAGL,KAAK,EACH9B,EAAOlB,OAAO,eCxB9B,SAASmD,EAAMzH,EAAGC,GAEdT,KAAKQ,EAAIA,EACTR,KAAKS,EAAIA,EAGb,SAASyH,EAAU1H,EAAGC,EAAGkB,EAAOE,GAE5B7B,KAAK6B,OAASA,EACd7B,KAAK2B,MAAQA,EACb3B,KAAKQ,EAAIA,EACTR,KAAKS,EAAIA,EChBb,IAAM0H,GAEFC,kBA4CJ,SAA2BC,EAAGC,GAE1B,GAAID,EAAE7H,IAAM8H,EAAE9H,GACX6H,EAAE5H,IAAM6H,EAAE7H,EAET,OAAO,EAGX,OAAO,GAnDP8H,sBAsDJ,SAA+BF,EAAGG,GAE9B,GAAIH,EAAE7H,EAAIgI,EAAKhI,GACZ6H,EAAE7H,EAAIgI,EAAKhI,EAAIgI,EAAK7G,OACpB0G,EAAE5H,EAAI+H,EAAK/H,GACX4H,EAAE5H,EAAI+H,EAAK/H,EAAI+H,EAAK3G,OAEnB,OAAO,EAGX,OAAO,GA/DP4G,0BAkEJ,SAAmCC,EAAMC,GAErC,GAAID,EAAKlI,EAAIkI,EAAK/G,MAAQgH,EAAKnI,GAC5BkI,EAAKlI,EAAImI,EAAKnI,EAAImI,EAAKhH,OACvB+G,EAAKjI,EAAIiI,EAAK7G,OAAS8G,EAAKlI,GAC5BiI,EAAKjI,EAAIkI,EAAKlI,EAAIkI,EAAK9G,OAEtB,OAAO,EAGX,OAAO,sZC7EX,SAAS+G,EAASrC,GACdlI,OAAOsI,QAAQJ,GAAU3F,QAAQ,SAAAgG,GAAoB,IAAAC,EAAAgC,EAAAjC,EAAA,GAAlB1I,EAAkB2I,EAAA,GAAZb,EAAYa,EAAA,GAErD,GAAU,SAAP3I,EAAc,CAEf,IAAIkJ,EAAoBpB,EAAOxH,IAAI,YAC/BsK,EAAiB9C,EAAOxH,IAAI,UAC5B2I,EAAiBnB,EAAOxH,IAAI,UAC5BuK,EAAU,IAAIb,EAAUd,EAAkB5G,EAAE4G,EAAkB3G,EAAEqI,EAAgBnH,MAAMmH,EAAgBjH,QAE1GxD,OAAOsI,QAAQJ,GAAU3F,QAAQ,SAAAoI,GAAoC,IAAAC,EAAAJ,EAAAG,EAAA,GAAjBE,GAAiBD,EAAA,GAAAA,EAAA,IACnE,GAAGC,EAAYhL,MAAMA,EAAK,CAExB,IAAIiL,EAAe,IAAIjB,EAAUgB,EAAY1K,IAAI,YAAYgC,EAAE0I,EAAY1K,IAAI,YAAYiC,EAAEyI,EAAY1K,IAAI,UAAUmD,MAAMuH,EAAY1K,IAAI,UAAUqD,QAEvJ,GDXV,SAAiBwG,EAAGC,GAEhB,IAAMc,KAEFlL,EAAO,UAgCX,OA9BImK,aAAaJ,GAAU,IAEvBmB,EAAWzI,KAAK0H,GAEhBnK,GAAQ,SAGRoK,aAAaL,GAAU,IAEvBmB,EAAWzI,KAAK2H,GAEhBpK,GAAQ,UAGmB,IAA3BkL,EAAW1B,QAAQW,IACpBA,aAAaH,GAAc,IAE1BkB,EAAWzI,KAAK0H,GAEhBnK,GAAQ,cAGmB,IAA3BkL,EAAW1B,QAAQY,IACpBA,aAAaJ,GAAc,IAE1BkB,EAAWzI,KAAK2H,GAEhBpK,GAAQ,aAGLiK,EAAOjK,GAAMmL,MAAM,KAAMD,GCzBvBE,CAAQP,EAAUI,GAAgB,CACnC,IAAII,ECrBhB,SAAyBR,EAAWI,GAElC,IAAIK,GAAYhJ,EAAE,EAAIC,EAAE,GAEhBgJ,EAAWV,EAAUvI,EAAMuI,EAAUpH,MAAQ,GAAUwH,EAAe3I,EAAM2I,EAAexH,MAAQ,GACrG+H,EAAWX,EAAUtI,EAAMsI,EAAUlH,OAAS,GAAUsH,EAAe1I,EAAM0I,EAAetH,OAAS,GAErG8H,EAA0BZ,EAAUpH,MAAQ,EAAQwH,EAAexH,MAAQ,EAC3EiI,EAA0Bb,EAAUlH,OAAS,EAAQsH,EAAetH,OAAS,EAGjF,GAAId,KAAK8I,IAAKJ,GAAWE,GAAyB5I,KAAK8I,IAAKH,GAAWE,EAAwB,EAErE,IAArBJ,EAAUM,SACbN,EAAUM,QAAS,GAEpB,IAAIC,EAAKJ,EAAwB5I,KAAK8I,IAAKJ,GAC1CO,EAAKJ,EAAwB7I,KAAK8I,IAAKH,GACpCK,GAAMC,EAEHR,EAAU/I,EADZiJ,EAAS,EACKM,GAEEA,EAKbR,EAAUhJ,EADZiJ,EAAS,EACKM,GAGCA,EAKtB,OAAOP,EDdiBS,CAAgBlB,EAAUI,GAEtCe,EAAQX,EAAY/I,EAAE,EAAE,GAAG,EAC3B2J,EAAkBjB,EAAY1K,IAAI,UAClC4L,EAAQb,EAAY9I,EAAE0G,EAAgBrH,MAAM,GAAGW,EAChD0J,GAAqBA,EAAkBrK,MAAM4E,OAAO,IACrD0F,GAAUD,EAAkBrK,MAAM,GAAGW,GAGvCuF,EAAO/F,KAAK,IAAI+H,EAAA,IAASxH,EAAE0J,EAAQzJ,EAAE2J,EAAQ7J,SAAS,iaE5BlE,SAAS8J,EAAa9D,GAAU,IAAAxG,EAAAC,KAC5B3B,OAAOsI,QAAQJ,GAAU3F,QAAQ,SAAAgG,GAAoB,IAAAC,EAAAyD,EAAA1D,EAAA,GAAZZ,GAAYa,EAAA,GAAAA,EAAA,IAEjDO,EAAoBpB,EAAOxH,IAAI,YAC/BsK,EAAiB9C,EAAOxH,IAAI,UAC5B2I,EAAiBnB,EAAOxH,IAAI,UAC5B+L,EAAevE,EAAOxH,IAAI,QAE3B4I,EAAkB5G,EAAE,EACrBT,EAAKyK,UACEpD,EAAkB5G,EAAEsI,EAAgBnH,MAAM4I,EAAchF,MAAM,GAAG5D,OACxE5B,EAAKyK,WAGJpD,EAAkB3G,EAAE,GAAK2G,EAAkB3G,EAAEqI,EAAgBjH,OAAO0I,EAAchF,MAAM,GAAG1D,SAC5FmE,EAAO/F,KAAK,IAAI+H,EAAA,IAASxH,EAAE2G,EAAgBrH,MAAM,GAAGU,EAAEC,GAAG0G,EAAgBrH,MAAM,GAAGW,EAAEF,SAAS4G,EAAgBrH,MAAM,GAAGS,kaCf5H,SAASkK,EAAalE,GAClBlI,OAAOsI,QAAQJ,GAAU3F,QAAQ,SAAAgG,GAAoB,IAAAC,EAAA6D,EAAA9D,EAAA,GAAZZ,GAAYa,EAAA,GAAAA,EAAA,IAEjDO,EAAoBpB,EAAOxH,IAAI,YAC/BsK,EAAiB9C,EAAOxH,IAAI,UAE5B+L,GADiBvE,EAAOxH,IAAI,UACbwH,EAAOxH,IAAI,SAE3B4I,EAAkB3G,EAAE,GACrB2G,EAAkB3G,EAAE,EACpBuF,EAAOlB,OAAO,WACPsC,EAAkB3G,EAAEqI,EAAgBjH,OAAO0I,EAAchF,MAAM,GAAG1D,SACzEuF,EAAkB3G,EAAE8J,EAAchF,MAAM,GAAG1D,OAAOiH,EAAgBjH,OAClEmE,EAAOlB,OAAO,aCTpB,SAASd,IAILhE,KAAKsG,MAAMG,QAAQ,SAAS,YAAaS,GACzClH,KAAKsG,MAAMG,QAAQ,SAAUJ,GAC7BrG,KAAKsG,MAAMG,QAAQ,SAAS,YAAamC,GACzC5I,KAAKsG,MAAMG,QAAQ,SAAS,WAAW,UAAW4D,GAClDrK,KAAKsG,MAAMG,QAAQ,SAAS,WAAW,QAASgE,GAEhDzK,KAAKqG,OAAO3B,OAAS,EAhBzBnH,EAAAU,EAAA0B,EAAA,sBAAAqE,6CCAA,IAAM2G,KAENA,EAAS,GAAK,MACdA,EAAS,IAAM,QACfA,EAAS,IAAM,QACfA,EAAS,IAAM,OACfA,EAAS,IAAM,MACfA,EAAS,IAAM,MACfA,EAAS,IAAM,QAEfA,EAAS,IAAM,OACfA,EAAS,IAAM,KACfA,EAAS,IAAM,QACfA,EAAS,IAAM,OAEfA,EAAS,IAAM,OACfA,EAAS,IAAM,MACfA,EAAS,IAAM,MACfA,EAAS,IAAM,QACfA,EAAS,IAAM,OACfA,EAAS,IAAM,OACfA,EAAS,IAAM,MACfA,EAAS,IAAM,QACfA,EAAS,IAAM,QACfA,EAAS,IAAM,OAEfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,ICnDf,IASMC,EAAK,GAELC,EAAO,GA+BPC,EAAI,GAOJC,EAAI,UC5CV,SAASC,IAELzJ,QAAQC,IAAI,oBACZxB,KAAK+B,OAAS,ICNlB,SAAgBuB,EAAS3B,EAAOE,GAE5B,IAAIqE,KAEA+E,GAEAC,SAAW,EACX3K,SAAY,EACZJ,OAAU,KACVC,QAAW,EACXF,OAEIM,EAAK,EACLC,EAAK,GAET0K,OAEI3K,EAAK,EACLC,EAAK,IAwIbT,KAAKoL,UAED5K,EAAK,EACLC,EAAK,GAGTT,KAAK4B,MAEDD,MAASA,EACTE,OAAUA,GAGd7B,KAAKC,IAhJL,SAAaoF,GAIT,IAFA,IAAIgG,EAAS,EAEJ5G,EAAWyB,EAAOxB,OAAS,EAAGD,GAAY,EAAGA,GAAY,EAAG,CAEjE,IAAMyG,EAAUhF,EAAOzB,GAEvB,GAAIY,EAAMC,YAAYhD,GAAK4I,EAAQ5F,YAAYhD,EAAG,CAE9C+I,EAAS5G,EAAW,EAEpB,OAIRyB,EAAOoF,OAAOD,EAAQ,EAAGhG,IAiI7BrF,KAAKuL,KA9HL,WAEIN,GAEIC,SAAW,EACX3K,SAAY,EACZJ,OAAU,KACVC,QAAW,EACXF,OAEIM,EAAK,EACLC,EAAK,GAET0K,OAEI3K,EAAK,EACLC,EAAK,KA+GjBT,KAAKqD,OA1GL,WAAkB,IAAAtD,EAAAC,KAEdkG,EAAOtF,QAAQ,SAACyE,GAAU,IAEfC,EAAuCD,EAAvCC,YAAaC,EAA0BF,EAA1BE,MAAOP,EAAmBK,EAAnBL,QAASU,EAAUL,EAAVK,OAEpC,GAAIV,EAAU,IAC2E,IAAtFjF,EAAKyL,QAAQlG,EAAY9E,EAAG8E,EAAY7E,EAAG6E,EAAY3D,MAAO2D,EAAYzD,QAAkB,CAE3F,IAAM4J,EAAQnI,EAAQoI,YAEtBpI,EAAQoI,YAAc1G,EAEtB1B,EAAQqI,UAEJjG,EACAH,EAAM/E,EAAG+E,EAAM9E,EAAG8E,EAAM5D,MAAO4D,EAAM1D,OACrCyD,EAAY9E,GAAKT,EAAKqL,SAAS5K,EAAIyK,EAAQE,MAAM3K,GAAI8E,EAAY7E,GAAKV,EAAKqL,SAAS3K,EAAIwK,EAAQE,MAAM1K,GAAI6E,EAAY3D,MAAO2D,EAAYzD,QAG7IyB,EAAQoI,YAAcD,KAI9BvF,MAmFJlG,KAAKgC,IAhFL,SAAaxB,EAAGC,GAEZT,KAAKoL,SAAS5K,EAAIA,EAClBR,KAAKoL,SAAS3K,EAAIA,GA8EtBT,KAAK4L,MA3EL,SAAepL,EAAGC,EAAGF,GAAkD,IAAxCJ,EAAwC8E,UAAAP,OAAA,QAAAQ,IAAAD,UAAA,GAAAA,UAAA,GAA/B4G,EAAA,EAAaA,EAAA,EAAa,IAE9D7L,KAAKuL,OAELN,EAAQ/K,OAEJM,EAAKA,EACLC,EAAKA,GAGTwK,EAAQC,SAAU,EAClBD,EAAQ1K,SAAWA,EACnB0K,EAAQ9K,OAASA,GAgErBH,KAAKgE,OA7DL,SAAgBwD,GAEZ,IAAwB,IAApByD,EAAQC,QAKZ,GAAID,EAAQ7K,QAAUoH,GAASyD,EAAQ1K,SAEnCP,KAAKuL,WAFT,CAOAN,EAAQ7K,SAAWoH,EAEnB,IAAMsE,EAAYb,EAAQ9K,OAAO8K,EAAQ7K,QAAU6K,EAAQ1K,UACrDwL,EAAwB,EAAhBhL,KAAKiL,SAAejL,KAAKkL,GAEvChB,EAAQE,MAAM3K,EAAIO,KAAKmB,MAAMnB,KAAKmL,IAAIH,GAASd,EAAQ/K,MAAMM,EAAIsL,GACjEb,EAAQE,MAAM1K,EAAIM,KAAKmB,MAAMnB,KAAKoL,IAAIJ,GAASd,EAAQ/K,MAAMO,EAAIqL,KA0CrE9L,KAAKwL,QAvCL,SAAiBhL,EAAGC,EAAGkB,EAAOE,GAE1B,IAAME,EAEG/B,KAAKoL,SAAS5K,EAAIyK,EAAQE,MAAM3K,EAFnCuB,EAGG/B,KAAKoL,SAAS3K,EAAIwK,EAAQE,MAAM1K,EAHnCsB,EAIO/B,KAAK4B,KAAKD,MAJjBI,EAKQ/B,KAAK4B,KAAKC,OAGxB,QAAIrB,EAAImB,GAASI,GACdvB,GAAKuB,EAAWA,GAChBtB,EAAIoB,GAAUE,GACdtB,GAAKsB,EAAWA,ID5IT,CAAW/B,KAAKsD,QAAStD,KAAK4B,KAAKD,MAAO3B,KAAK4B,KAAKC,QAElE7B,KAAKqC,QACLf,EAAA,EAAOxD,KAAKkC,MAEZA,KAAKqG,UAELrG,KAAKoM,SAAW,IEbpB,SAAkBC,EAAOhG,GAErB,IAAMiG,KACAC,KAEN,SAASC,IAEL,IAAK,IAAIrJ,KAASoJ,EAEVA,EAAO/M,eAAe2D,KACL,IAAlBoJ,EAAOpJ,KAENoJ,EAAOpJ,IAAS,EAEhBkD,EAAO1F,MAEH8L,KAAQ,WACR1E,OAAU5E,EACVA,MAAS,QAazB,SAASuJ,EAAQC,GAEb,IAAMC,EAAOD,EAAME,QACb/E,EAAQuE,EAAM3E,QAAQkF,IAEb,IAAX9E,IACwB,IAAzByE,EAAOD,EAAMxE,MAEZ6E,EAAMG,iBAENP,EAAOD,EAAMxE,KAAU,EAEvBzB,EAAO1F,MAEH8L,KAAQ,WACR1E,OAAUuE,EAAMxE,GAChB3E,MAAS,UAKrB,SAAS4J,EAAMJ,GAEX,IAAMC,EAAOD,EAAME,QACb/E,EAAQuE,EAAM3E,QAAQkF,IAEb,IAAX9E,IACwB,IAAzByE,EAAOD,EAAMxE,MAEZ6E,EAAMG,iBAENP,EAAOD,EAAMxE,KAAU,EAEvBzB,EAAO1F,MAEH8L,KAAQ,WACR1E,OAAUuE,EAAMxE,GAChB3E,MAAS,QAKrB,SAASW,IAELkJ,iBAAiB,OAAQR,GACzBQ,iBAAiB,UAAWN,GAC5BM,iBAAiB,QAASD,GAG9BV,EAAMzL,QAAQ,SAACgM,GAEX,QAA8B,IAAnBjC,EAASiC,GAAuB,CAEvC,IAAM1O,EAAO,OAASyM,EAASiC,GAE/BP,EAAM1L,KAAKiM,GACXN,EAAM3L,KAAKzC,GAEXqO,EAAOrO,IAAQ,KAIvB4F,EAAMhG,KAAKkC,MAEXA,KAAKkD,QAvEL,WAEI+J,oBAAoB,OAAQT,GAC5BS,oBAAoB,UAAWP,GAC/BO,oBAAoB,QAASF,IAoEjC/M,KAAK8D,MAAQA,EFnFG,EAAc8G,EAAGC,EAAKE,EAAED,GAAI9K,KAAKqG,QAfrD9I,EAAAU,EAAA0B,EAAA,sBAAAqL,obGAA,SAASkC,EAAO3G,GAAU,IAAAxG,EAAAC,KAEtB3B,OAAOsI,QAAQJ,GAAU3F,QAAQ,SAAAgG,GAAoB,IAAAC,EAAAC,EAAAF,EAAA,GAAZZ,GAAYa,EAAA,GAAAA,EAAA,IAE3CsG,EAAkBnH,EAAOxH,IAAI,UAC7B4O,EAAkBpH,EAAOxH,IAAI,UAC7B4I,EAAoBpB,EAAOxH,IAAI,YAC/B+L,EAAgBvE,EAAOxH,IAAI,QAEjC4O,EAAgBtN,MAAMc,QAAQ,SAACyE,GAAU,IAE9BC,EAA0DD,EAA1DC,YAAaC,EAA6CF,EAA7CE,MAAOC,EAAsCH,EAAtCG,UAAWC,EAA2BJ,EAA3BI,OAAQT,EAAmBK,EAAnBL,QAASU,EAAUL,EAAVK,OAEvD,GAAID,EAAOf,OAAS,EAAG,CAEnBW,EAAMjF,SAAWL,EAAKyH,MAAMnE,OAI5B,IAFA,IAAM9C,EAAW,IAAOiF,EAEjBH,EAAMjF,SAAWG,GAEpB8E,EAAMjF,SAAWG,EACjB8E,EAAME,MAASA,IAAUE,EAAOf,OAAS,EAAK,EAAIa,EAAQ,EAIlE4H,EAAgBpL,OAAO9B,KAEnByF,OAAUA,EACVH,OAEI/E,EAAKiF,EAAOJ,EAAME,OAAO,GAAKE,EAAOJ,EAAME,OAAO,GAClD9E,EAAKgF,EAAOJ,EAAME,OAAO,GAAKE,EAAOJ,EAAME,OAAO,GAClD5D,MAAS8D,EAAOJ,EAAME,OAAO,GAC7B1D,OAAU4D,EAAOJ,EAAME,OAAO,IAElCD,aAEI9E,GAAM4G,EAAkB5G,EAAI8E,EAAY,GAAKiF,EAAchF,MAAM,GAAG/E,GAAK+J,EAAchF,MAAM,GAAGzD,MAChGrB,GAAM2G,EAAkB3G,EAAI6E,EAAY,GAAKiF,EAAchF,MAAM,GAAG9E,GAAK8J,EAAchF,MAAM,GAAGzD,MAChGQ,GAAM8E,EAAkB9E,EAAIgD,EAAY,GAAKiF,EAAchF,MAAM,GAAGjD,GAAKiI,EAAchF,MAAM,GAAGzD,MAChGH,MAAS2D,EAAY,GAAKiF,EAAchF,MAAM,GAAGzD,MACjDD,OAAUyD,EAAY,GAAKiF,EAAchF,MAAM,GAAGzD,OAEtDkD,QAAWmI,EAAgBnI,QAAUA,QC1CrD,SAAS3B,IAILrD,KAAKsD,QAAQC,UAAY,UACzBvD,KAAKsD,QAAQE,SAAS,EAAG,EAAGxD,KAAK4B,KAAKD,MAAO3B,KAAK4B,KAAKC,QAEvD7B,KAAKsD,QAAQC,UAAY,UACzBvD,KAAKsD,QAAQE,SAASxD,KAAKqC,KAAK,GAAG7B,EAAER,KAAKqC,KAAK,GAAGP,MAAO9B,KAAKqC,KAAK,GAAG5B,EAAET,KAAKqC,KAAK,GAAGP,MAAO9B,KAAKqC,KAAK,GAAGV,MAAM3B,KAAKqC,KAAK,GAAGP,MAAO9B,KAAKqC,KAAK,GAAGR,OAAO7B,KAAKqC,KAAK,GAAGP,OAEpK9B,KAAKsG,MAAMG,QAAQ,SAAS,YAAayG,GACzClN,KAAK+B,OAAOsB,SAbhB9F,EAAAU,EAAA0B,EAAA,sBAAA0D,mBCAA3F,EAAAD,QAAA,grBCAAC,EAAAD,QAAA,m7BCAA,ICAMyP,IACEhP,KAAQ,SACRmP,MAAS,SACRZ,KAAQ,QACT/G,OAAUnI,EAAQ,MAElBW,KAAQ,OACRmP,MAAS,SACRZ,KAAQ,QACT/G,OAAUnI,EAAQ,2VCL1B,IAAM+P,KAAMC,OAAAC,QAGLN,GAHKM,sBCCZ,ICAA,SAAiBC,GAAQ,IAEdxH,EAA6BwH,EAA7BxH,OAAQyH,EAAqBD,EAArBC,UAAWC,EAAUF,EAAVE,OAEpBC,EAASH,EAAOG,SAAU,EAC1BpI,EAAYiI,EAAOjI,WAAa,GAChCqI,EAAQJ,EAAOI,QAAS,EACxBC,EAAQL,EAAOK,OAAS,EAExBlM,GAEFC,OAAW6L,EAAUK,aACrBpM,MAAU+L,EAAUM,aAGpBC,EAAU,KACVC,GAAa,EAgHjBlO,KAAK6D,YAAa,EAClB7D,KAAK2N,OAASA,EACd3N,KAAK4B,KAAOA,EACZ5B,KAAKmD,SACLnD,KAAKmO,QAAU,SAEfnO,KAAKkE,KAhBL,SAAckK,GAEVH,EAAUG,GAedpO,KAAKwK,QAZL,WAEI0D,GAAa,GA3GjB,WAAsB,IAAAnO,EAAAC,KAEZqO,EAAS,ICzBvB,SAAgB5B,EAAM6B,EAAY3M,EAAOE,GAErC,IAAM0M,EAAUC,SAASC,cAAc,UACjCnL,EAAUiL,EAAQG,WAAWjC,GAC7BkC,EAAQC,OAAOC,kBAAoB,EAEzC,SAASvN,EAAOK,EAAOE,GAEnB0M,EAAQO,aAAa,SAAUH,EAAQ9M,GACvC0M,EAAQO,aAAa,QAASH,EAAQhN,GAEtC4M,EAAQQ,MAAMlN,OAASA,EAAS,KAChC0M,EAAQQ,MAAMpN,MAAQA,EAAQ,KAE9B2B,EAAQxB,MAAM6M,EAAOA,GAYzBJ,EAAQO,aAAa,KAAMR,GAE3BhN,EAAOK,EAAOE,GAEd7B,KAAKsD,QAAUA,EACftD,KAAKuO,QAAUA,EACfvO,KAAKsB,OAASA,EACdtB,KAAK6N,MAhBL,WAEIU,EAAQQ,MAAMC,eAAiB,mBAC/BT,EAAQQ,MAAMC,eAAiB,sBAC/BT,EAAQQ,MAAMC,eAAiB,cAC/BT,EAAQQ,MAAMC,eAAiB,YAC/B1L,EAAQ2L,uBAAwB,GDEjB,CAAW,KAAM,UAAWjP,KAAK4B,KAAKD,MAAO3B,KAAK4B,KAAKC,SAExD,IAAVgM,GAEAQ,EAAOR,QAGXH,EAAUwB,YAAYb,EAAOE,SAE7BvO,KAAK0N,UAAYA,EACjB1N,KAAKsD,QAAU+K,EAAO/K,QACtBtD,KAAKuO,QAAUF,EAAOE,QAEtBvO,KAAKiG,UACLjG,KAAKwH,SACLxH,KAAKwH,MAAMnE,OAAS,EACpBrD,KAAKwH,MAAMxD,OAAS,EAEpBhE,KAAKoO,MAAQpO,KAAK2N,OAAOM,QACzBjO,KAAKoO,MAAMtK,MAAMhG,KAAKkC,MACtBA,KAAKoO,MAAMrK,MAAMjG,KAAKkC,MAEtB,IAAMmP,EAAO,IE/CrB,WAAyC,IAA3B3J,EAA2BP,UAAAP,OAAA,QAAAQ,IAAAD,UAAA,GAAAA,UAAA,GAAf,GAAI6I,EAAW7I,UAAAP,OAAA,QAAAQ,IAAAD,UAAA,GAAAA,UAAA,GAAH,EAE9BmK,EAAc,EACdC,EAAa,KACbC,EAAa,KA0CjBtP,KAAKwF,UAAYA,EACjBxF,KAAK8N,MAAQA,EAEb9N,KAAKqD,OA3CL,SAAgBhC,GAEZ,IAAMkO,EAAgBC,KAAKC,MAER,OAAfJ,GAEAhO,EAAQkO,EAAgBF,GAI5BK,sBAAsB1P,KAAKqD,OAAOlE,KAAKa,KAAMqB,IAE7CgO,EAAaE,GAgCjBvP,KAAKgE,OA7BL,SAAgB3C,GAEZ,IAAMsO,EAAgBH,KAAKC,MAS3B,IAPmB,OAAfH,IAGAF,GAAeO,EAAgBL,GAI5BF,GAAe,IAAOpP,KAAKwF,UAAYxF,KAAK8N,OAG/CsB,GAAe,IAAOpP,KAAKwF,UAAYxF,KAAK8N,MAE5CzM,EAAQ,IAAOrB,KAAKwF,WAGxB8J,EAAaK,EAGb1L,WAAWjE,KAAKgE,OAAO7E,KAAKa,KAAMqB,GAAU,IAAON,KAAK6O,IAAI5P,KAAKwF,UAAW,MFI/D,CAASA,EAAWsI,GAEjCqB,EAAKnL,OAAO,SAAC6L,GAKT,OAHA9P,EAAKyH,MAAMxD,OAAS6L,EACpB9P,EAAKqO,MAAMpK,OAAOlG,KAAKiC,IAEJ,IAAfmO,GAEAnO,EAAKqO,MAAMrK,MAAMjG,KAAKiC,QAEtBmO,GAAa,IAKD,OAAZD,GAEAlO,EAAKqO,MAAMlL,QAAQpF,KAAKiC,GACxBA,EAAKqO,MAAQrO,EAAK4N,OAAOM,GACzBlO,EAAKqO,MAAMtK,MAAMhG,KAAKiC,GACtBA,EAAKqO,MAAMrK,MAAMjG,KAAKiC,QAEtBkO,EAAU,YAPd,IAaJkB,EAAK9L,OAAO,SAACwM,GAET9P,EAAKyH,MAAMnE,OAASwM,EAEhBnC,EAAUM,cAAgBjO,EAAK6B,KAAKD,OACrC+L,EAAUK,eAAiBhO,EAAK6B,KAAKC,SAEpC9B,EAAK6B,KAAKD,MAAQ+L,EAAUM,YAC5BjO,EAAK6B,KAAKC,OAAS6L,EAAUK,aAE7BM,EAAO/M,OAAOvB,EAAK6B,KAAKD,MAAO5B,EAAK6B,KAAKC,SAE3B,IAAVgM,GAEAQ,EAAOR,QAGX9N,EAAKqO,MAAM9M,OAAOxD,KAAKiC,IAG3BA,EAAKqO,MAAM/K,OAAOvF,KAAKiC,KGhGnC,SAAiBkG,EAAQ5E,GAErB,IAAIyO,KAGJ7J,EAAOrF,QAAQ,SAAUmP,GAGrB,IAAMC,EAAU,IAAIC,QAAQ,SAAUC,EAASC,GAW3C,GARmB,YAAfJ,EAAMtD,OAENsD,EAAM5R,OAAS,kBAAM4R,EAAMrK,QAE3BwK,EAAQH,IAIO,UAAfA,EAAMtD,KAAkB,CAExB,IAAMpH,EAAQ,IAAI+K,MAElB/K,EAAMgL,IAAMN,EAAMrK,OAGlBL,EAAMiL,OAAS,WAEXP,EAAM5R,OAAS,kBAAMkH,GAErB6K,EAAQH,SAKX,GAAmB,UAAfA,EAAMtD,KAAkB,CAE7B,IAAM8D,EAAQ,IAAIC,MAAMT,EAAMrK,QAG9B6K,EAAME,iBAAmB,WAErBV,EAAM5R,OAAS,kBAAMoS,EAAMG,aAE3BR,EAAQH,OAKpBD,EAASnP,KAAKqP,KAIlBC,QAAQU,IAAIb,GAAUc,KAAKvP,GH8CvBwP,CAAQ5K,EAAQ,SAACA,GAEbA,EAAOrF,QAAQ,SAACmP,QAEiC,IAAlChQ,EAAKkG,OAAO8J,EAAMtD,KAAO,OAEhC1M,EAAKkG,OAAO8J,EAAMtD,KAAO,cAG6B,IAA/C1M,EAAKkG,OAAO8J,EAAMtD,KAAO,KAAKsD,EAAM1C,SAE3CtN,EAAKkG,OAAO8J,EAAMtD,KAAO,KAAKsD,EAAM1C,WAGxCtN,EAAKkG,OAAO8J,EAAMtD,KAAO,KAAKsD,EAAM1C,OAAO0C,EAAM7R,MAAQ6R,EAAM5R,SAGnE4B,EAAK8D,YAAa,IAGtB7D,KAAKmP,KAAOA,EACZnP,KAAK6D,YAAa,GAsBX/F,KAAKkC,KAAMyN,IAEP,IAAXG,IAEAgB,OAAOkC,QAAU9Q,MD7IzB,EAEIiG,OAAUqH,EACVI,UAAac,SAASuC,KACtBnD,QAAU,EACVD,OAAUqD,EACVnD,OAAS","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","import * as Ease from 'modules/ease.js';\n\nfunction Forces(parts) {\n\n    this.name = 'forces';\n\n    function add(force) {\n\n        const {easing, elapsed, ending, handling, duration, x, y} = force;\n\n        force.x = x;\n        force.y = y;\n        force.duration = duration;\n        force.easing = easing || Ease.linear(1);\n        force.elapsed = elapsed || 0;\n        force.ending = ending || false;\n        force.handling = handling || false;\n\n        force.moved = {\n\n            'x': 0,\n            'y': 0\n        };\n\n        this.parts.push(force);\n    }\n\n    this.parts = [];\n\n    this.add = add;\n\n    parts.forEach((force) => {\n\n        this.add(force);\n    });\n}\n\nexport {Forces};\n","function easeIn(power) {\n\n    // accelerating from zero velocity\n    return (x) => x ** power;\n}\n\nfunction easeInOut(power) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return (x) => {\n\n        if (x < 0.5) {\n\n            return easeIn(power)(2 * x) / 2\n        }\n\n        return 1 - easeInOut(power)(1 - x)\n    }\n}\n\nfunction easeOut(power) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return (x) => 1 - easeIn(power)(1 - x);\n}\n\nfunction linear(factor) {\n\n    // linear progression\n    return (x) => x * factor;\n}\n\nfunction easeInQuad(x) {\n\n    // accelerating from zero velocity\n    return easeIn(2)(x);\n}\n\nfunction easeInCubic(x) {\n\n    // accelerating from zero velocity\n    return easeIn(3)(x);\n}\n\nfunction easeInQuart(x) {\n\n    // accelerating from zero velocity\n    return easeIn(4)(x);\n}\n\nfunction easeInOutQuad(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(2)(x);\n}\n\nfunction easeInOutCubic(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(3)(x);\n}\n\nfunction easeInOutQuart(x) {\n\n    // acceleration until halfway, then deceleration (with x in [0, 1] range)\n    return easeInOut(4)(x);\n}\n\nfunction easeOutQuad(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(2)(x);\n}\n\nfunction easeOutCubic(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(3)(x);\n}\n\nfunction easeOutQuart(x) {\n\n    // decelerating to zero velocity (with x in [0, 1] range)\n    return easeOut(4)(x);\n}\n\nfunction reverse(handler) {\n\n    // reversing easing function\n    return (x) => handler(1 - x);\n}\n\n// exports current module as functions\nexport {\n\n    // export ease function creators\n    easeIn, easeInOut, easeOut, linear,\n\n    // export ease-in functions\n    easeInCubic, easeInQuad, easeInQuart,\n\n    // export ease-in-out functions\n    easeInOutCubic, easeInOutQuad, easeInOutQuart,\n\n    // export ease-out functions\n    easeOutCubic, easeOutQuad, easeOutQuart,\n\n    // export utility functions\n    reverse\n};\n","function resize() {\n\n    console.log('resize demo scene');\n    var xOffset=0;\n    var yOffset=0;\n    var zOffset=0;\n    var width=width=this.size.width;\n    var height=this.size.height;\n    var scale=1;\n    this.camera.set(0,0);\n    this.camera.size.width=this.size.width;\n    this.camera.size.height=this.size.height;\n    if(this.size.width>this.size.height){\n      width=this.size.height;\n      xOffset=Math.ceil((this.size.width-this.size.height)/2);\n    }else if(this.size.width<this.size.height){\n\n      scale=Math.round((this.size.width/this.size.height + Number.EPSILON) * 100) / 100;\n      width=this.size.height;\n      height=this.size.height;\n      yOffset=((this.size.height-this.size.width)/scale)/2;\n      xOffset=0\n    }\n    this.zone[0]={'x':xOffset,'y': yOffset,'z':zOffset,width:width,height:height,scale:scale};\n\n}\n\nexport {resize};\n","import {destroy} from './destroy.js';\nimport {render} from './render.js';\nimport {resize} from './resize.js';\nimport {setup} from './setup.js';\nimport {start} from './start.js';\nimport {update} from './update.js';\n\nif (typeof module.hot !== 'undefined') {\n\n    module.hot.accept([\n\n        './destroy.js',\n        './render.js',\n        './resize.js',\n        './setup.js',\n        './start.js',\n        './update.js'\n    ]);\n}\n\nexport {destroy, render, resize, setup, start, update};\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","function destroy() {\n\n    console.log('destroy loading scene');\n    console.log('-------');\n\n    delete this.state.redirect;\n}\n\nexport {destroy};\n","function render() {\n\n    // console.log('render loading scene');\n\n    this.context.fillStyle = '#181a1f';\n    this.context.fillRect(0, 0, this.size.width, this.size.height);\n\n    this.context.font = '16px Courier New';\n    this.context.textAlign = 'start';\n    this.context.textBaseline = 'top';\n    this.context.fillStyle = '#6b717d';\n    this.context.fillText('/ Theatre', 8, 8);\n    this.context.fillStyle = '#d7dae0';\n\n    this.context.fillText('$ preloading assets...', 8, 32);\n\n    if (this.preloading === false) {\n\n        this.context.fillText('$ preloading completed', 8, 32 + 24);\n        this.context.fillText('$ loading demo scene...', 8, 32 + 24 + 24);\n    }\n}\n\nexport {render};\n","function resize() {\n\n    console.log('resize loading scene');\n}\n\nexport {resize};\n","function setup() {\n\n    console.log('setup loading scene');\n}\n\nexport {setup};\n","function start() {\n\n    console.log('start loading scene');\n\n    this.state.redirect = false;\n}\n\nexport {start};\n","function update() {\n\n    // console.log('update loading scene');\n\n    if (this.preloading === false && this.state.redirect === false) {\n\n        setTimeout(() => {\n\n            this.load('demo');\n\n        }, 3000);\n\n        this.state.redirect = true;\n    }\n}\n\nexport {update};\n","import {destroy} from './destroy.js';\nimport {render} from './render.js';\nimport {resize} from './resize.js';\nimport {setup} from './setup.js';\nimport {start} from './start.js';\nimport {update} from './update.js';\n\nif (typeof module.hot !== 'undefined') {\n\n    module.hot.accept([\n\n        './destroy.js',\n        './render.js',\n        './resize.js',\n        './setup.js',\n        './start.js',\n        './update.js'\n    ]);\n}\n\nexport {destroy, render, resize, setup, start, update};\n","function destroy() {\n\n    console.log('destroy demo scene');\n    console.log('-------');\n}\n\nexport {destroy};\n","function Entity(name, components) {\n\n    function add(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        components.forEach((component) => {\n\n            this.components[component.name] = component;\n        });\n    }\n\n    function get(component) {\n\n        return this.components[component];\n    }\n\n    function has(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        for (let iterator = 0, length = components.length; iterator < length; iterator += 1) {\n\n            const search = components[iterator];\n            const component = search.replace('not:', '');\n            const exclude = search !== component;\n\n            if (this.components.hasOwnProperty(component) === exclude) {\n\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function remove(components) {\n\n        if (Array.isArray(components) === false) {\n\n            components = [components];\n        }\n\n        for (let iterator = 0, length = components.length; iterator < length; iterator += 1) {\n\n            const component = components[iterator];\n\n            if (this.components.hasOwnProperty(component) === true) {\n\n                delete this.components[component];\n            }\n        }\n    }\n\n    this.components = {};\n    this.name = name;\n\n    this.add = add;\n    this.get = get;\n    this.has = has;\n    this.remove = remove;\n\n    this.add(components);\n}\n\nfunction World(context) {\n\n    function add(entities) {\n\n        if (Array.isArray(entities) === false) {\n\n            entities = [entities];\n        }\n\n        entities.forEach((entity) => {\n\n            this.entities[entity.name] = entity;\n        });\n    }\n\n    function get(entity) {\n\n        return this.entities[entity];\n    }\n\n    function remove(entities) {\n\n        if (Array.isArray(entities) === false) {\n\n            entities = [entities];\n        }\n\n        for (let iterator = 0, length = entities.length; iterator < length; iterator += 1) {\n\n            const entity = entities[iterator];\n            const key = entity.name || entity;\n\n            if (this.entities.hasOwnProperty(key) === true) {\n\n                delete this.entities[key];\n            }\n        }\n    }\n\n    function system(components, handler, entities = this.entities) {\n\n        const chosen = {};\n\n        Object.entries(entities).forEach(([name, entity]) => {\n\n            if (entity.has(components) === true) {\n\n                chosen[name] = entity;\n            }\n        });\n\n        handler.call(context, chosen);\n    }\n\n    this.entities = {};\n\n    this.add = add;\n    this.get = get;\n    this.remove = remove;\n    this.system = system;\n}\n\nexport {\n\n    // exports current module as an object\n    World,\n\n    // exports helpers for current module\n    Entity\n};\n","function Camera(camera, opacity = 1) {\n\n    this.name = 'camera';\n\n    this.camera = camera;\n    this.opacity = opacity;\n}\n\nexport {Camera};\n","function Position(x, y, z = 0) {\n\n    this.name = 'position';\n\n    this.x = x;\n    this.y = y;\n    this.z = z;\n}\n\nexport {Position};\n","function Images(parts) {\n\n    this.name = 'images';\n\n    this.parts = parts;\n\n    this.parts.forEach((image) => {\n\n        const {destination, frame, framerate, frames, opacity, source} = image;\n\n        image.source = source;\n\n        image.frames = frames || [[0, 0, 32, 32]];\n        image.frame = frame || 0;\n        image.framerate = framerate || 8;\n        image.destination = destination || [0, 0, 0, 32, 32];\n        image.opacity = opacity || 1;\n\n        image.elapsed = 0;\n    });\n}\n\nexport {Images};\n","function Hitbox(width, height) {\n\n    this.name = 'hitbox';\n\n    this.width = width;\n    this.height = height;\n}\n\nexport {Hitbox};\n","function Zone(frame) {\n  return{\n    name : 'zone',\n\n    frame : frame\n  }\n}\n\nexport {Zone};\n","import {Entity} from 'modules/world.js';\r\nimport {Camera} from 'components/common/camera.js';\r\nimport {Position} from 'components/common/position.js';\r\nimport {Images} from 'components/common/images.js';\r\nimport {Hitbox} from 'components/common/hitbox.js';\r\nimport {Zone} from 'components/common/zone.js';\r\nimport {Input} from 'components/specific/input.js';\r\nimport {Ping} from 'components/specific/ping.js';\r\n\r\nfunction Player(number,command,x,y) {\r\n\r\nconst entity=new Entity(\r\n  'player'+number, [\r\n      new Camera(this.camera),\r\n      Zone(this.zone),\r\n      new Position(x,y,1),\r\n      new Ping(),\r\n      new Hitbox(32,96),\r\n      new Images([{\r\n          'source':  this.assets.images.common.player(),\r\n          'frames': [\r\n              [0, 0, 32, 96]\r\n          ],\r\n          'frame': 0,\r\n          'destination': [0, 0, 0, 32, 96]\r\n      }]),\r\n  ]);\r\n\r\n  if(command && command.length>0){\r\n      entity.add(new Input(command));\r\n  }\r\n\r\n  return entity;\r\n}\r\n\r\nexport {Player};\r\n","function Ping() {\r\n    this.name = 'ping';\r\n}\r\n\r\nexport {Ping};\r\n","function Input(inputs) {\r\n\r\n    this.name = 'input';\r\n\r\n    this.inputs = inputs;\r\n}\r\n\r\nexport {Input};\r\n","import {World} from 'modules/world.js';\nimport {Player} from 'entities/player.js';\nimport {Ball} from 'entities/ball.js';\n\nfunction start() {\n\n    console.log('start demo scene');\n\n    this.world = new World(this);\n    var command1=['KEY_UP','KEY_DOWN'];\n    var command2=['KEY_Z','KEY_S'];\n    var player1=Player.call(this,1,command1,16,this.zone[0].height/2-48);\n    var player2=Player.call(this,2,command2,this.zone[0].width-48,this.zone[0].height/2-48);\n    var ball=Ball.call(this);\n    this.world.add(ball);\n    this.world.add(player1);\n    this.world.add(player2);\n}\n\nexport {start};\n","import {Entity} from 'modules/world.js';\r\nimport {Camera} from 'components/common/camera.js';\r\nimport {Position} from 'components/common/position.js';\r\nimport {Images} from 'components/common/images.js';\r\nimport {Hitbox} from 'components/common/hitbox.js';\r\nimport {Zone} from 'components/common/zone.js';\r\nimport {Forces} from 'components/common/forces.js';\r\nimport {Sphere} from 'components/specific/sphere.js';\r\n\r\nfunction Ball() {\r\nconst entity=new Entity(\r\n  'ball', [\r\n      new Camera(this.camera),\r\n      Zone(this.zone),\r\n      new Position(this.size.width/2,this.size.height/2,1),\r\n      new Forces([{x:-5,y:0,duration:30}]),\r\n      new Hitbox(32,32),\r\n      new Sphere(),\r\n      new Images([{\r\n          'source':  this.assets.images.common.ball(),\r\n          'frames': [\r\n              [0, 0, 32, 32]\r\n          ],\r\n          'frame': 0,\r\n          'destination': [0, 0, 0, 32, 32]\r\n      }]),\r\n  ]);\r\n  return entity;\r\n}\r\n\r\nexport {Ball};\r\n","function Sphere() {\r\n    this.name = 'sphere';\r\n}\r\n\r\nexport {Sphere};\r\n","function forces(entities) {\n\n    Object.entries(entities).forEach(([name, entity]) => {\n\n        const forcesComponent = entity.get('forces');\n        const positionComponent = entity.get('position');\n\n        const trashes = [];\n\n        forcesComponent.parts.forEach((force) => {\n\n            const unlimited = force.ending === false;\n            const remaining = force.duration - force.elapsed;\n            const delta = (unlimited === false && this.delta.update > remaining) ? remaining : this.delta.update;\n\n            const progress = (force.elapsed + delta) / force.duration;\n\n            const moved = {\n\n                'x': force.x * force.easing(progress),\n                'y': force.y * force.easing(progress)\n            };\n\n            positionComponent.x += moved.x - force.moved.x;\n            positionComponent.y += moved.y - force.moved.y;\n            force.moved = moved;\n\n            force.elapsed += this.delta.update;\n\n            if (typeof force.handling === 'function') {\n\n                const remove = () => {\n\n                    trashes.push(force);\n                };\n\n                force.handling(entity, force.moved.x, force.moved.y, force.elapsed, remove);\n            }\n\n            if (force.elapsed >= force.duration\n            && typeof force.ending === 'function'\n            && trashes.indexOf(force) === -1) {\n\n                force.ending(entity, force.moved.x, force.moved.y, force.elapsed);\n                trashes.push(force);\n            }\n        });\n\n        forcesComponent.parts = forcesComponent.parts.filter((force) => {\n\n            return trashes.indexOf(force) === -1;\n        });\n    });\n}\n\nexport {forces};\n","import {Forces} from 'components/common/forces.js';\r\n\r\nfunction inputs(entities) {\r\n    Object.entries(entities).forEach(([name, entity]) => {\r\n\r\n      this.inputs.forEach((input) => {\r\n\r\n        const inputComponent = entity.get('input');\r\n        var index= inputComponent.inputs.indexOf(input.action);\r\n        \r\n        if (index !== -1 && input.state === 'DOWN') {\r\n\r\n          switch (index) {\r\n              case 0:\r\n                entity.add([new Forces([{x:0,y:-5,duration:10}])])\r\n\r\n              break;\r\n              case 1:\r\n                entity.add([new Forces([{x:0,y:5,duration:10}])])\r\n\r\n              break;\r\n          }\r\n        }\r\n        else if (index !== -1\r\n        && input.state === 'UP') {\r\n\r\n          switch (index) {\r\n              case 0:\r\n                entity.remove('forces')\r\n              break;\r\n              case 1:\r\n                entity.remove('forces')\r\n              break;\r\n\r\n          }\r\n        }\r\n\r\n    });\r\n\r\n  });\r\n}\r\n\r\nexport {inputs};\r\n","function Circle(x, y, radius) {\n\n    this.radius = radius;\n    this.x = x;\n    this.y = y;\n}\n\nfunction Point(x, y) {\n\n    this.x = x;\n    this.y = y;\n}\n\nfunction Rectangle(x, y, width, height) {\n\n    this.height = height;\n    this.width = width;\n    this.x = x;\n    this.y = y;\n}\n\nfunction Segment(xa, ya, xb, yb) {\n\n    this.xa = xa;\n    this.xb = xb;\n    this.ya = ya;\n    this.yb = yb;\n}\n\n// exports current module as objects\nexport {Circle, Point, Rectangle, Segment};\n","import {Point, Rectangle} from './shape.js';\n\nconst caller = {\n\n    'collidePointPoint': collidePointPoint,\n    'collidePointRectangle': collidePointRectangle,\n    'collideRectangleRectangle': collideRectangleRectangle\n};\n\nfunction collide(A, B) {\n\n    const parameters = [];\n\n    let name = 'collide';\n\n    if (A instanceof Point === true) {\n\n        parameters.push(A);\n\n        name += 'Point';\n    }\n\n    if (B instanceof Point === true) {\n\n        parameters.push(B);\n\n        name += 'Point';\n    }\n\n    if (parameters.indexOf(A) === -1\n    && A instanceof Rectangle === true) {\n\n        parameters.push(A);\n\n        name += 'Rectangle';\n    }\n\n    if (parameters.indexOf(B) === -1\n    && B instanceof Rectangle === true) {\n\n        parameters.push(B);\n\n        name += 'Rectangle';\n    }\n\n    return caller[name].apply(null, parameters);\n}\n\nfunction collidePointPoint(A, B) {\n\n    if (A.x !== B.x\n    || A.y !== B.y) {\n\n        return false;\n    }\n\n    return true;\n}\n\nfunction collidePointRectangle(A, BCDE) {\n\n    if (A.x < BCDE.x\n    || A.x > BCDE.x + BCDE.width\n    || A.y < BCDE.y\n    || A.y > BCDE.y + BCDE.height) {\n\n        return false;\n    }\n\n    return true;\n}\n\nfunction collideRectangleRectangle(ABCD, EFGH) {\n\n    if (ABCD.x + ABCD.width < EFGH.x\n    || ABCD.x > EFGH.x + EFGH.width\n    || ABCD.y + ABCD.height < EFGH.y\n    || ABCD.y > EFGH.y + EFGH.height) {\n\n        return false;\n    }\n\n    return true;\n}\n\n// exports current module as a function\nexport {collide};\n","import {Forces} from 'components/common/forces.js';\r\nimport {collideDistance} from 'systems/utils/collideDistance.js';\r\nimport {collide} from 'modules/collide.js';\r\nimport {Rectangle} from 'modules/shape.js';\r\n\r\nfunction collides(entities) {\r\n    Object.entries(entities).forEach(([name, entity]) => {\r\n\r\n    if(name==='ball'){\r\n\r\n      var positionComponent = entity.get('position');\r\n      var hitboxComponent =entity.get('hitbox');\r\n      var forcesComponent =entity.get('forces');\r\n      var rectangle=new Rectangle(positionComponent.x,positionComponent.y,hitboxComponent.width,hitboxComponent.height);\r\n\r\n      Object.entries(entities).forEach(([otherEntityName, otherEntity]) => {\r\n        if(otherEntity.name!=name){\r\n\r\n          var otherRectangle=new Rectangle(otherEntity.get('position').x,otherEntity.get('position').y,otherEntity.get('hitbox').width,otherEntity.get('hitbox').height);\r\n\r\n          if(collide(rectangle,otherRectangle)){\r\n            var collideDist=collideDistance(rectangle,otherRectangle);\r\n\r\n            var xForces=collideDist.x>0?5:-5;\r\n            var otherEntityForces=otherEntity.get('forces');\r\n            var yForces=collideDist.y+forcesComponent.parts[0].y;\r\n            if(otherEntityForces && otherEntityForces.parts.length>0 ){\r\n              yForces+= otherEntityForces.parts[0].y;\r\n            }\r\n\r\n            entity.add([new Forces([{x:xForces,y:yForces,duration:30}])])\r\n          }\r\n        }\r\n      })\r\n\r\n    }\r\n  });\r\n}\r\n\r\nexport {collides};\r\n","function collideDistance(rectangle, otherRectangle) {\r\n\r\n  var collision= {x:0 , y:0} ;\r\n\r\n      var deltaX = ( rectangle.x + ( rectangle.width / 2 ) ) - ( otherRectangle.x + ( otherRectangle.width / 2 ) );\r\n  \t\tvar deltaY = ( rectangle.y + ( rectangle.height / 2 ) ) - ( otherRectangle.y + ( otherRectangle.height / 2 ) );\r\n\r\n  \t\tvar middleCenterDistanceX = ( rectangle.width / 2 ) + ( otherRectangle.width / 2 );\r\n  \t\tvar middleCenterDistanceY = ( rectangle.height / 2 ) + ( otherRectangle.height / 2 );\r\n  \t\tvar colDir = null;\r\n\r\n  \t\tif( Math.abs( deltaX ) < middleCenterDistanceX && Math.abs( deltaY ) < middleCenterDistanceY ) {\r\n\r\n  \t\t\tif( collision.active === false )\r\n  \t\t\t\tcollision.active = true;\r\n\r\n  \t\t\tvar oX = middleCenterDistanceX - Math.abs( deltaX ),\r\n  \t\t\t\toY = middleCenterDistanceY - Math.abs( deltaY );\r\n  \t\t\tif( oX >= oY ) {\r\n  \t\t\t\tif( deltaY > 0 ) {\r\n  \t\t\t\t      collision.y=oY;\r\n  \t\t\t\t} else {\r\n  \t          collision.y=-oY;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t\telse {\r\n  \t\t\t\tif ( deltaX > 0 ) {\r\n  \t          collision.x=oX;\r\n  \t\t\t\t}\r\n  \t\t\t\telse {\r\n  \t          collision.x=-oX;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n    return collision;\r\n};\r\n\r\nexport {collideDistance};\r\n","import {Forces} from 'components/common/forces.js';\r\n\r\nfunction collidesBall(entities) {\r\n    Object.entries(entities).forEach(([name, entity]) => {\r\n\r\n    var positionComponent = entity.get('position');\r\n    var hitboxComponent =entity.get('hitbox');\r\n    var forcesComponent =entity.get('forces');\r\n    var zoneComponent =entity.get('zone');\r\n\r\n    if(positionComponent.x<0){\r\n      this.restart();\r\n    }else if(positionComponent.x+hitboxComponent.width>zoneComponent.frame[0].width){\r\n      this.restart();\r\n    }\r\n\r\n    if(positionComponent.y<0 || positionComponent.y+hitboxComponent.height>zoneComponent.frame[0].height){\r\n      entity.add([new Forces([{x:forcesComponent.parts[0].x,y:-forcesComponent.parts[0].y,duration:forcesComponent.parts[0].duration}])])\r\n    }\r\n  });\r\n}\r\n\r\nexport {collidesBall};\r\n","import {Forces} from 'components/common/forces.js';\r\n\r\nfunction collidesPing(entities) {\r\n    Object.entries(entities).forEach(([name, entity]) => {\r\n\r\n    var positionComponent = entity.get('position');\r\n    var hitboxComponent =entity.get('hitbox');\r\n    var forcesComponent =entity.get('forces');\r\n    var zoneComponent =entity.get('zone');\r\n\r\n    if(positionComponent.y<0){\r\n      positionComponent.y=0;\r\n      entity.remove('forces');\r\n    }else if(positionComponent.y+hitboxComponent.height>zoneComponent.frame[0].height){\r\n      positionComponent.y=zoneComponent.frame[0].height-hitboxComponent.height;\r\n      entity.remove('forces');\r\n    }\r\n  });\r\n}\r\n\r\nexport {collidesPing};\r\n","import {forces} from 'systems/common/forces.js';\nimport {inputs} from 'systems/specific/inputs.js';\nimport {collides} from 'systems/specific/collides.js';\nimport {collidesBall} from 'systems/specific/collidesBall.js';\nimport {collidesPing} from 'systems/specific/collidesPing.js';\n\nfunction update() {\n\n    // console.log('update demo scene');\n\n    this.world.system(['forces','position'], forces);\n    this.world.system(['input'], inputs);\n    this.world.system(['hitbox','position'], collides);\n    this.world.system(['hitbox','position','sphere'], collidesBall);\n    this.world.system(['hitbox','position','ping'], collidesPing);\n\n    this.inputs.length = 0;\n}\n\nexport {update};\n","const keynames = [];\n\nkeynames[9] = 'TAB';\nkeynames[13] = 'ENTER';\nkeynames[16] = 'SHIFT';\nkeynames[17] = 'CTRL';\nkeynames[18] = 'ALT';\nkeynames[27] = 'ESC';\nkeynames[32] = 'SPACE';\n\nkeynames[37] = 'LEFT';\nkeynames[38] = 'UP';\nkeynames[39] = 'RIGHT';\nkeynames[40] = 'DOWN';\n\nkeynames[48] = 'ZERO';\nkeynames[49] = 'ONE';\nkeynames[50] = 'TWO';\nkeynames[51] = 'THREE';\nkeynames[52] = 'FOUR';\nkeynames[53] = 'FIVE';\nkeynames[54] = 'SIX';\nkeynames[55] = 'SEVEN';\nkeynames[56] = 'EIGHT';\nkeynames[57] = 'NINE';\n\nkeynames[65] = 'A';\nkeynames[66] = 'B';\nkeynames[67] = 'C';\nkeynames[68] = 'D';\nkeynames[69] = 'E';\nkeynames[70] = 'F';\nkeynames[71] = 'G';\nkeynames[72] = 'H';\nkeynames[73] = 'I';\nkeynames[74] = 'J';\nkeynames[75] = 'K';\nkeynames[76] = 'L';\nkeynames[77] = 'M';\nkeynames[78] = 'N';\nkeynames[79] = 'O';\nkeynames[80] = 'P';\nkeynames[81] = 'Q';\nkeynames[82] = 'R';\nkeynames[83] = 'S';\nkeynames[84] = 'T';\nkeynames[85] = 'U';\nkeynames[86] = 'V';\nkeynames[87] = 'W';\nkeynames[88] = 'X';\nkeynames[89] = 'Y';\nkeynames[90] = 'Z';\n\n// exports current module as an array\nexport {keynames};\n","const TAB = 9;\nconst ENTER = 13;\nconst SHIFT = 16;\nconst CTRL = 17;\nconst ALT = 18;\nconst ESC = 27;\nconst SPACE = 32;\n\nconst LEFT = 37;\nconst UP = 38;\nconst RIGHT = 39;\nconst DOWN = 40;\n\nconst ZERO = 48;\nconst ONE = 49;\nconst TWO = 50;\nconst THREE = 51;\nconst FOUR = 52;\nconst FIVE = 53;\nconst SIX = 54;\nconst SEVEN = 55;\nconst EIGHT = 56;\nconst NINE = 57;\n\nconst A = 65;\nconst B = 66;\nconst C = 67;\nconst D = 68;\nconst E = 69;\nconst F = 70;\nconst G = 71;\nconst H = 72;\nconst I = 73;\nconst J = 74;\nconst K = 75;\nconst L = 76;\nconst M = 77;\nconst N = 78;\nconst O = 79;\nconst P = 80;\nconst Q = 81;\nconst R = 82;\nconst S = 83;\nconst T = 84;\nconst U = 85;\nconst V = 86;\nconst W = 87;\nconst X = 88;\nconst Y = 89;\nconst Z = 90;\n\nexport {\n\n    // exports control keys\n    TAB, ENTER, SHIFT, CTRL, ALT, ESC, SPACE,\n\n    // exports arrow keys\n    LEFT, UP, RIGHT, DOWN,\n\n    // exports numeric keys\n    ZERO, ONE, TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE,\n\n    // exports alhabetic keys\n    A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z\n};\n","import {Camera} from 'modules/camera.js'\nimport {Keyboard} from 'modules/keyboard.js';\nimport {UP,DOWN,Z,S} from 'modules/keycodes.js';\nimport {resize} from './resize.js';\n\nfunction setup() {\n\n    console.log('setup demo scene');\n    this.camera = new Camera(this.context, this.size.width, this.size.height);\n\n    this.zone=[];\n    resize.call(this);\n\n    this.inputs = [];\n\n    this.keyboard = new Keyboard([UP,DOWN,Z,S], this.inputs);\n\n}\n\nexport {setup};\n","import * as Ease from './ease.js';\n\nfunction Camera(context, width, height) {\n\n    let images = [];\n\n    let shaking = {\n\n        'current': false,\n        'duration': 0,\n        'easing': null,\n        'elapsed': 0,\n        'force': {\n\n            'x': 0,\n            'y': 0\n        },\n        'shift': {\n\n            'x': 0,\n            'y': 0\n        }\n    };\n\n    function add(image) {\n\n        let target = 0;\n\n        for (let iterator = images.length - 1; iterator >= 0; iterator -= 1) {\n\n            const current = images[iterator];\n\n            if (image.destination.z >= current.destination.z) {\n\n                target = iterator + 1;\n\n                break;\n            }\n        }\n\n        images.splice(target, 0, image);\n    }\n\n    function idle() {\n\n        shaking = {\n\n            'current': false,\n            'duration': 0,\n            'easing': null,\n            'elapsed': 0,\n            'force': {\n\n                'x': 0,\n                'y': 0\n            },\n            'shift': {\n\n                'x': 0,\n                'y': 0\n            }\n        };\n    }\n\n    function render() {\n\n        images.forEach((image) => {\n\n            const {destination, frame, opacity, source} = image;\n\n            if (opacity > 0\n            && this.visible(destination.x, destination.y, destination.width, destination.height) === true) {\n\n                const alpha = context.globalAlpha;\n\n                context.globalAlpha = opacity;\n\n                context.drawImage(\n\n                    source,\n                    frame.x, frame.y, frame.width, frame.height,\n                    destination.x - (this.position.x + shaking.shift.x), destination.y - (this.position.y + shaking.shift.y), destination.width, destination.height\n                );\n\n                context.globalAlpha = alpha;\n            }\n        });\n\n        images = [];\n    }\n\n    function set(x, y) {\n\n        this.position.x = x;\n        this.position.y = y;\n    }\n\n    function shake(x, y, duration, easing = Ease.reverse(Ease.easeOut(2))) {\n\n        this.idle();\n\n        shaking.force = {\n\n            'x': x,\n            'y': y\n        };\n\n        shaking.current = true;\n        shaking.duration = duration;\n        shaking.easing = easing;\n    }\n\n    function update(delta) {\n\n        if (shaking.current === false) {\n\n            return;\n        }\n\n        if (shaking.elapsed + delta >= shaking.duration) {\n\n            this.idle();\n\n            return;\n        }\n\n        shaking.elapsed += delta;\n\n        const amplitude = shaking.easing(shaking.elapsed / shaking.duration);\n        const angle = Math.random() * 2 * Math.PI;\n\n        shaking.shift.x = Math.round(Math.cos(angle) * shaking.force.x * amplitude);\n        shaking.shift.y = Math.round(Math.sin(angle) * shaking.force.y * amplitude);\n    }\n\n    function visible(x, y, width, height) {\n\n        const camera = {\n\n            'x': this.position.x + shaking.shift.x,\n            'y': this.position.y + shaking.shift.y,\n            'width': this.size.width,\n            'height': this.size.height\n        };\n\n        if (x + width <= camera.x\n        || x >= camera.x + camera.width\n        || y + height <= camera.y\n        || y >= camera.y + camera.height) {\n\n            return false;\n        }\n\n        return true;\n    }\n\n    this.position = {\n\n        'x': 0,\n        'y': 0\n    };\n\n    this.size = {\n\n        'width': width,\n        'height': height\n    };\n\n    this.add = add;\n    this.idle = idle;\n    this.render = render;\n    this.set = set;\n    this.shake = shake;\n    this.update = update;\n    this.visible = visible;\n}\n\n// exports current module as an object\nexport {Camera};\n","import {keynames} from './keynames.js';\n\nfunction Keyboard(codes, inputs) {\n\n    const names = [];\n    const states = {};\n\n    function blur() {\n\n        for (let state in states) {\n\n            if (states.hasOwnProperty(state)\n            && states[state] === true) {\n\n                states[state] = false;\n\n                inputs.push({\n\n                    'type': 'KEYBOARD',\n                    'action': state,\n                    'state': 'UP'\n                });\n            }\n        }\n    }\n\n    function destroy() {\n\n        removeEventListener('blur', blur);\n        removeEventListener('keydown', keydown);\n        removeEventListener('keyup', keyup);\n    }\n\n    function keydown(event) {\n\n        const code = event.keyCode;\n        const index = codes.indexOf(code);\n\n        if (index !== -1\n        && states[names[index]] === false) {\n\n            event.preventDefault();\n\n            states[names[index]] = true;\n\n            inputs.push({\n\n                'type': 'KEYBOARD',\n                'action': names[index],\n                'state': 'DOWN'\n            });\n        }\n    }\n\n    function keyup(event) {\n\n        const code = event.keyCode;\n        const index = codes.indexOf(code);\n\n        if (index !== -1\n        && states[names[index]] === true) {\n\n            event.preventDefault();\n\n            states[names[index]] = false;\n\n            inputs.push({\n\n                'type': 'KEYBOARD',\n                'action': names[index],\n                'state': 'UP'\n            });\n        }\n    }\n\n    function setup() {\n\n        addEventListener('blur', blur);\n        addEventListener('keydown', keydown);\n        addEventListener('keyup', keyup);\n    }\n\n    codes.forEach((code) => {\n\n        if (typeof keynames[code] !== 'undefined') {\n\n            const name = 'KEY_' + keynames[code];\n\n            codes.push(code);\n            names.push(name);\n\n            states[name] = false;\n        }\n    });\n\n    setup.call(this);\n\n    this.destroy = destroy;\n    this.setup = setup;\n}\n\n// exports current module as an object\nexport {Keyboard};\n","function images(entities) {\n\n    Object.entries(entities).forEach(([name, entity]) => {\n\n        const cameraComponent = entity.get('camera');\n        const imagesComponent = entity.get('images');\n        const positionComponent = entity.get('position');\n        const zoneComponent = entity.get('zone');\n\n        imagesComponent.parts.forEach((image) => {\n\n            const {destination, frame, framerate, frames, opacity, source} = image;\n\n            if (frames.length > 1) {\n\n                image.elapsed += this.delta.render;\n\n                const duration = 1000 / framerate;\n\n                while (image.elapsed >= duration) {\n\n                    image.elapsed -= duration;\n                    image.frame = (frame === frames.length - 1) ? 0 : frame + 1;\n                }\n            }\n\n            cameraComponent.camera.add({\n\n                'source': source,\n                'frame': {\n\n                    'x': frames[image.frame][2] * frames[image.frame][0],\n                    'y': frames[image.frame][3] * frames[image.frame][1],\n                    'width': frames[image.frame][2],\n                    'height': frames[image.frame][3]\n                },\n                'destination': {\n\n                    'x': (positionComponent.x + destination[0] + zoneComponent.frame[0].x) * zoneComponent.frame[0].scale,\n                    'y': (positionComponent.y + destination[1] + zoneComponent.frame[0].y) * zoneComponent.frame[0].scale,\n                    'z': (positionComponent.z + destination[2] + zoneComponent.frame[0].z) * zoneComponent.frame[0].scale,\n                    'width': destination[3] * zoneComponent.frame[0].scale,\n                    'height': destination[4] * zoneComponent.frame[0].scale\n                },\n                'opacity': cameraComponent.opacity * opacity\n            });\n        });\n    });\n}\n\nexport {images};\n","import {images} from 'systems/common/images.js';\n\nfunction render() {\n\n    // console.log('render demo scene');\n\n    this.context.fillStyle = '#d7dae0';\n    this.context.fillRect(0, 0, this.size.width, this.size.height);\n\n    this.context.fillStyle = '#000000';\n    this.context.fillRect(this.zone[0].x*this.zone[0].scale, this.zone[0].y*this.zone[0].scale, this.zone[0].width*this.zone[0].scale, this.zone[0].height*this.zone[0].scale);\n\n    this.world.system(['images','position'], images);\n    this.camera.render();\n}\n\nexport {render};\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAABgCAYAAAB8InCYAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAAFRJREFUaIHtzjEBADAIxMCnS7VUGv4FFBksFwO56vt+FjubcwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAJBluAwJY4NotAAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAAMRJREFUWIXtl7EVwyAMRA8/D0PGSJ3RPItnyihORR4mkoAgAQXX+dm6+xwUxgGA9x4KcsnzVTK0A8Dznc6KyhlXme1Kody3WZhNObx6VmqgJZjyIdvgGtAKz3pSABbhrHfJGTBVCmC5ejJj4170gphuC4YB9Kw/6IoBhmkBLIAFEACqfqOU5GKAYZoKoOc2fLPSBnpA3DKm2oIgyxZ+vLkGLCBIT+leEAZa/xXExZScgZY2srOld8PYaMjl9O8ASa/zeHwAksMXkqW9xfwAAAAASUVORK5CYII=\"","const datasets = [];\n\nexport {datasets};\n","const images = [{\n        'name': 'player',\n        'scope': 'common',\n         'type': 'image',\n        'source': require('./common/player.png')\n    },{\n        'name': 'ball',\n        'scope': 'common',\n         'type': 'image',\n        'source': require('./common/ball.png')\n    }];\n\nexport {images};\n","import {datasets} from './datasets/index.js';\nimport {images} from './images/index.js';\nimport {sounds} from './sounds/index.js';\n\nconst assets = [\n\n    ...datasets,\n    ...images,\n    ...sounds\n];\n\nexport {assets};\n","import {assets} from 'assets/index.js';\nimport * as scenes from 'scenes/index.js';\n\nimport {Theatre} from 'core/theatre.js';\n\nnew Theatre({\n\n    'assets': assets,\n    'container': document.body,\n    'expose': true,\n    'scenes': scenes,\n    'sharp': true\n});\n","import {Canvas} from 'core/canvas.js';\nimport {Loop} from 'core/loop.js';\n\nimport {preload} from 'core/preload.js';\n\nfunction Theatre(config) {\n\n    const {assets, container, scenes} = config;\n\n    const expose = config.expose || false;\n    const framerate = config.framerate || 60;\n    const sharp = config.sharp || false;\n    const speed = config.speed || 1;\n\n    const size = {\n\n        'height' : container.offsetHeight,\n        'width' : container.offsetWidth\n    };\n\n    let loading = null;\n    let restarting = false;\n\n    function initialize() {\n\n        const canvas = new Canvas('2d', 'theatre', this.size.width, this.size.height);\n\n        if (sharp === true) {\n\n            canvas.sharp();\n        }\n\n        container.appendChild(canvas.element);\n\n        this.container = container;\n        this.context = canvas.context;\n        this.element = canvas.element;\n\n        this.assets = {};\n        this.delta = {};\n        this.delta.render = 0;\n        this.delta.update = 0;\n\n        this.scene = this.scenes.loading;\n        this.scene.setup.call(this);\n        this.scene.start.call(this);\n\n        const loop = new Loop(framerate, speed);\n\n        loop.update((timeframe) => {\n\n            this.delta.update = timeframe;\n            this.scene.update.call(this);\n\n            if (restarting === true) {\n\n                this.scene.start.call(this);\n\n                restarting = false;\n\n                return;\n            }\n\n            if (loading !== null) {\n\n                this.scene.destroy.call(this);\n                this.scene = this.scenes[loading];\n                this.scene.setup.call(this);\n                this.scene.start.call(this);\n\n                loading = null;\n\n                return;\n            }\n        });\n\n        loop.render((timeframe) => {\n\n            this.delta.render = timeframe;\n\n            if (container.offsetWidth !== this.size.width\n            || container.offsetHeight !== this.size.height) {\n\n                this.size.width = container.offsetWidth;\n                this.size.height = container.offsetHeight;\n\n                canvas.resize(this.size.width, this.size.height);\n\n                if (sharp === true) {\n\n                    canvas.sharp();\n                }\n\n                this.scene.resize.call(this);\n            }\n\n            this.scene.render.call(this);\n        });\n\n        preload(assets, (assets) => {\n\n            assets.forEach((asset) => {\n\n                if (typeof this.assets[asset.type + 's'] === 'undefined') {\n\n                    this.assets[asset.type + 's'] = {};\n                }\n\n                if (typeof this.assets[asset.type + 's'][asset.scope] === 'undefined') {\n\n                    this.assets[asset.type + 's'][asset.scope] = {};\n                }\n\n                this.assets[asset.type + 's'][asset.scope][asset.name] = asset.getter;\n            });\n\n            this.preloading = false;\n        });\n\n        this.loop = loop;\n        this.preloading = true;\n    }\n\n    function load(scene) {\n\n        loading = scene;\n    }\n\n    function restart() {\n\n        restarting = true;\n    }\n\n    this.preloading = false;\n    this.scenes = scenes;\n    this.size = size;\n    this.state = {};\n    this.version = '0.33.0';\n\n    this.load = load;\n    this.restart = restart;\n\n    initialize.call(this, config);\n\n    if (expose === true) {\n\n        window.theatre = this;\n    }\n}\n\n// exports current module as an object\nexport {Theatre};\n","function Canvas(type, identifier, width, height) {\n\n    const element = document.createElement('canvas');\n    const context = element.getContext(type);\n    const ratio = window.devicePixelRatio || 1;\n\n    function resize(width, height) {\n\n        element.setAttribute('height', ratio * height);\n        element.setAttribute('width', ratio * width);\n\n        element.style.height = height + 'px';\n        element.style.width = width + 'px';\n\n        context.scale(ratio, ratio);\n    }\n\n    function sharp() {\n\n        element.style.imageRendering = '-moz-crisp-edges';\n        element.style.imageRendering = '-webkit-crisp-edges';\n        element.style.imageRendering = 'crisp-edges';\n        element.style.imageRendering = 'pixelated';\n        context.imageSmoothingEnabled = false;\n    }\n\n    element.setAttribute('id', identifier);\n\n    resize(width, height);\n\n    this.context = context;\n    this.element = element;\n    this.resize = resize;\n    this.sharp = sharp;\n}\n\n// exports current module as an object\nexport {Canvas};\n","function Loop(framerate = 60, speed = 1) {\n\n    let elapsedTime = 0;\n    let lastRender = null;\n    let lastUpdate = null;\n\n    function render(handler) {\n\n        const currentRender = Date.now();\n\n        if (lastRender !== null) {\n\n            handler(currentRender - lastRender);\n        }\n\n        // call user's render handler on each available frame\n        requestAnimationFrame(this.render.bind(this, handler));\n\n        lastRender = currentRender;\n    }\n\n    function update(handler) {\n\n        const currentUpdate = Date.now();\n\n        if (lastUpdate !== null) {\n\n            // define elapsed time since last update\n            elapsedTime += currentUpdate - lastUpdate;\n        }\n\n        // call user's update handler matching timeframe, speed and fixing browser time handling\n        while (elapsedTime >= 1000 / this.framerate / this.speed) {\n\n            // define elapsed time since last user's update handler matching timeframe and speed\n            elapsedTime -= 1000 / this.framerate / this.speed;\n\n            handler(1000 / this.framerate);\n        }\n\n        lastUpdate = currentUpdate;\n\n        // call update loop at least 60 times per second to quickly catch framerate or speed changes\n        setTimeout(this.update.bind(this, handler), 1000 / Math.max(this.framerate, 60));\n    }\n\n    this.framerate = framerate;\n    this.speed = speed;\n\n    this.render = render;\n    this.update = update;\n}\n\n// exports current module as an object\nexport {Loop};\n","function preload(assets, handler) {\n\n    let promises = [];\n\n    // preloads each asset\n    assets.forEach(function (asset) {\n\n        // creates a promise for current asset preloading\n        const promise = new Promise(function (resolve, reject) {\n\n            // if current asset is a dataset then preload it\n            if (asset.type === 'dataset') {\n\n                asset.getter = () => asset.source;\n\n                resolve(asset);\n            }\n\n            // if current asset is an image then preload it\n            if (asset.type === 'image') {\n\n                const image = new Image();\n\n                image.src = asset.source;\n\n                // when current image is loaded then resolve current promise\n                image.onload = function () {\n\n                    asset.getter = () => image;\n\n                    resolve(asset);\n                };\n            }\n\n            // if current asset is a sound then preload it\n            else if (asset.type === 'sound') {\n\n                const sound = new Audio(asset.source);\n\n                // when current sound is loaded then resolve current promise\n                sound.oncanplaythrough = function () {\n\n                    asset.getter = () => sound.cloneNode();\n\n                    resolve(asset);\n                };\n            }\n        });\n\n        promises.push(promise);\n    });\n\n    // call user's success handler when all assets are preloaded\n    Promise.all(promises).then(handler);\n}\n\n// exports current module as a function\nexport {preload};\n"],"sourceRoot":""}